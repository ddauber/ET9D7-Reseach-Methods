<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Data Wrangling | R for Non-Programmers: A Guide for Social Scientists</title>
  <meta name="description" content="This books is intended for Social Scientists. No matter whether you have years of experiences, this book might come in handy if you never use R or any other programming language before." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Data Wrangling | R for Non-Programmers: A Guide for Social Scientists" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This books is intended for Social Scientists. No matter whether you have years of experiences, this book might come in handy if you never use R or any other programming language before." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Data Wrangling | R for Non-Programmers: A Guide for Social Scientists" />
  
  <meta name="twitter:description" content="This books is intended for Social Scientists. No matter whether you have years of experiences, this book might come in handy if you never use R or any other programming language before." />
  

<meta name="author" content="Daniel Dauber" />


<meta name="date" content="2021-08-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="starting-your-r-projects.html"/>
<link rel="next" href="descriptive-statistics.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Non-Programmers</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome üëã</a></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html"><i class="fa fa-check"></i>Acknowledgments üôè</a></li>
<li class="chapter" data-level="1" data-path="readme-before-you-get-started.html"><a href="readme-before-you-get-started.html"><i class="fa fa-check"></i><b>1</b> <code>Readme.</code> Before you get started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="readme-before-you-get-started.html"><a href="readme-before-you-get-started.html#a-starting-point-and-reference-book"><i class="fa fa-check"></i><b>1.1</b> A starting point and reference book</a></li>
<li class="chapter" data-level="1.2" data-path="readme-before-you-get-started.html"><a href="readme-before-you-get-started.html#download-the-companion-r-package"><i class="fa fa-check"></i><b>1.2</b> Download the companion R package</a></li>
<li class="chapter" data-level="1.3" data-path="readme-before-you-get-started.html"><a href="readme-before-you-get-started.html#a-tidyverse-approach-with-some-basic-r"><i class="fa fa-check"></i><b>1.3</b> A ‚Äòtidyverse‚Äô approach with some basic R</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="why-learn-a-programming-language-as-a-non-programmer.html"><a href="why-learn-a-programming-language-as-a-non-programmer.html"><i class="fa fa-check"></i><b>2</b> Why learn a programming language as a non-programmer?</a>
<ul>
<li class="chapter" data-level="2.1" data-path="why-learn-a-programming-language-as-a-non-programmer.html"><a href="why-learn-a-programming-language-as-a-non-programmer.html#learning-new-tools-to-analyse-your-data-is-always-essential"><i class="fa fa-check"></i><b>2.1</b> Learning new tools to analyse your data is always essential</a></li>
<li class="chapter" data-level="2.2" data-path="why-learn-a-programming-language-as-a-non-programmer.html"><a href="why-learn-a-programming-language-as-a-non-programmer.html#programming-languages-enhance-your-conceptual-thinking"><i class="fa fa-check"></i><b>2.2</b> Programming languages enhance your conceptual thinking</a></li>
<li class="chapter" data-level="2.3" data-path="why-learn-a-programming-language-as-a-non-programmer.html"><a href="why-learn-a-programming-language-as-a-non-programmer.html#programming-languages-allow-you-to-look-at-your-data-from-a-different-angle"><i class="fa fa-check"></i><b>2.3</b> Programming languages allow you to look at your data from a different angle</a></li>
<li class="chapter" data-level="2.4" data-path="why-learn-a-programming-language-as-a-non-programmer.html"><a href="why-learn-a-programming-language-as-a-non-programmer.html#learning-any-programming-language-will-help-you-learn-other-programming-languages."><i class="fa fa-check"></i><b>2.4</b> Learning any programming language will help you learn other programming languages.</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="setting-up-r-and-rstudio.html"><a href="setting-up-r-and-rstudio.html"><i class="fa fa-check"></i><b>3</b> Setting up R and RStudio</a>
<ul>
<li class="chapter" data-level="3.1" data-path="setting-up-r-and-rstudio.html"><a href="setting-up-r-and-rstudio.html#installing-r"><i class="fa fa-check"></i><b>3.1</b> Installing R</a></li>
<li class="chapter" data-level="3.2" data-path="setting-up-r-and-rstudio.html"><a href="setting-up-r-and-rstudio.html#installing-rstudio"><i class="fa fa-check"></i><b>3.2</b> Installing RStudio</a></li>
<li class="chapter" data-level="3.3" data-path="setting-up-r-and-rstudio.html"><a href="setting-up-r-and-rstudio.html#when-you-first-start-rstudio"><i class="fa fa-check"></i><b>3.3</b> When you first start RStudio</a></li>
<li class="chapter" data-level="3.4" data-path="setting-up-r-and-rstudio.html"><a href="setting-up-r-and-rstudio.html#updating-r-and-rstudio"><i class="fa fa-check"></i><b>3.4</b> Updating R and RStudio: Living at the pulse of innovation</a></li>
<li class="chapter" data-level="3.5" data-path="setting-up-r-and-rstudio.html"><a href="setting-up-r-and-rstudio.html#rstudio-cloud"><i class="fa fa-check"></i><b>3.5</b> RStudio Cloud</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="the-rstudio-interface.html"><a href="the-rstudio-interface.html"><i class="fa fa-check"></i><b>4</b> The RStudio Interface</a>
<ul>
<li class="chapter" data-level="4.1" data-path="the-rstudio-interface.html"><a href="the-rstudio-interface.html#the-console-window"><i class="fa fa-check"></i><b>4.1</b> The Console window</a></li>
<li class="chapter" data-level="4.2" data-path="the-rstudio-interface.html"><a href="the-rstudio-interface.html#the-source-window"><i class="fa fa-check"></i><b>4.2</b> The Source window</a></li>
<li class="chapter" data-level="4.3" data-path="the-rstudio-interface.html"><a href="the-rstudio-interface.html#the-environment-history-connections-tutorial-window"><i class="fa fa-check"></i><b>4.3</b> The Environment / History / Connections / Tutorial window</a></li>
<li class="chapter" data-level="4.4" data-path="the-rstudio-interface.html"><a href="the-rstudio-interface.html#the-files-plots-packages-help-viewer-window"><i class="fa fa-check"></i><b>4.4</b> The Files / Plots / Packages / Help / Viewer window</a></li>
<li class="chapter" data-level="4.5" data-path="the-rstudio-interface.html"><a href="the-rstudio-interface.html#customise-your-user-interface"><i class="fa fa-check"></i><b>4.5</b> Customise your user interface</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-basics-the-very-fundamentals.html"><a href="r-basics-the-very-fundamentals.html"><i class="fa fa-check"></i><b>5</b> R Basics: The very fundamentals</a>
<ul>
<li class="chapter" data-level="5.1" data-path="r-basics-the-very-fundamentals.html"><a href="r-basics-the-very-fundamentals.html#basic-computations-in-r"><i class="fa fa-check"></i><b>5.1</b> Basic computations in R</a></li>
<li class="chapter" data-level="5.2" data-path="r-basics-the-very-fundamentals.html"><a href="r-basics-the-very-fundamentals.html#assigning-values-to-objects"><i class="fa fa-check"></i><b>5.2</b> Assigning values to objects: ‚Äò&lt;-‚Äô</a></li>
<li class="chapter" data-level="5.3" data-path="r-basics-the-very-fundamentals.html"><a href="r-basics-the-very-fundamentals.html#functions"><i class="fa fa-check"></i><b>5.3</b> Functions</a></li>
<li class="chapter" data-level="5.4" data-path="r-basics-the-very-fundamentals.html"><a href="r-basics-the-very-fundamentals.html#r-packages"><i class="fa fa-check"></i><b>5.4</b> R packages</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="r-basics-the-very-fundamentals.html"><a href="r-basics-the-very-fundamentals.html#installing-packages-using-a-function"><i class="fa fa-check"></i><b>5.4.1</b> Installing packages using <code>install.packages()</code></a></li>
<li class="chapter" data-level="5.4.2" data-path="r-basics-the-very-fundamentals.html"><a href="r-basics-the-very-fundamentals.html#installing-packages-via-rstudio"><i class="fa fa-check"></i><b>5.4.2</b> Installing packages via RStudio‚Äôs package pane</a></li>
<li class="chapter" data-level="5.4.3" data-path="r-basics-the-very-fundamentals.html"><a href="r-basics-the-very-fundamentals.html#using-r-packages"><i class="fa fa-check"></i><b>5.4.3</b> Using R Packages</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="r-basics-the-very-fundamentals.html"><a href="r-basics-the-very-fundamentals.html#coding-etiquette"><i class="fa fa-check"></i><b>5.5</b> Coding etiquette</a></li>
<li class="chapter" data-level="5.6" data-path="r-basics-the-very-fundamentals.html"><a href="r-basics-the-very-fundamentals.html#exercises-chapter-5"><i class="fa fa-check"></i><b>5.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="starting-your-r-projects.html"><a href="starting-your-r-projects.html"><i class="fa fa-check"></i><b>6</b> Starting your R projects</a>
<ul>
<li class="chapter" data-level="6.1" data-path="starting-your-r-projects.html"><a href="starting-your-r-projects.html#creating-an-r-project"><i class="fa fa-check"></i><b>6.1</b> Creating an R Project file</a></li>
<li class="chapter" data-level="6.2" data-path="starting-your-r-projects.html"><a href="starting-your-r-projects.html#organising-your-projects"><i class="fa fa-check"></i><b>6.2</b> Organising your projects</a></li>
<li class="chapter" data-level="6.3" data-path="starting-your-r-projects.html"><a href="starting-your-r-projects.html#creating-an-r-script"><i class="fa fa-check"></i><b>6.3</b> Creating an R Script</a></li>
<li class="chapter" data-level="6.4" data-path="starting-your-r-projects.html"><a href="starting-your-r-projects.html#r-markdown-and-r-notebooks"><i class="fa fa-check"></i><b>6.4</b> Using R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>7</b> Data Wrangling</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-wrangling.html"><a href="data-wrangling.html#import-your-data"><i class="fa fa-check"></i><b>7.1</b> Import your data</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="data-wrangling.html"><a href="data-wrangling.html#import-data-from-the-files-pane"><i class="fa fa-check"></i><b>7.1.1</b> Import data from the Files pane</a></li>
<li class="chapter" data-level="7.1.2" data-path="data-wrangling.html"><a href="data-wrangling.html#importing-data-from-the-environment-pane"><i class="fa fa-check"></i><b>7.1.2</b> Importing data from the Environment pane</a></li>
<li class="chapter" data-level="7.1.3" data-path="data-wrangling.html"><a href="data-wrangling.html#importing-data-using-functions"><i class="fa fa-check"></i><b>7.1.3</b> Importing data using functions directly</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="data-wrangling.html"><a href="data-wrangling.html#inspecting-raw-data"><i class="fa fa-check"></i><b>7.2</b> Inspecting your data</a></li>
<li class="chapter" data-level="7.3" data-path="data-wrangling.html"><a href="data-wrangling.html#colnames-cleaning"><i class="fa fa-check"></i><b>7.3</b> Cleaning your column names: Call the <code>janitor</code></a></li>
<li class="chapter" data-level="7.4" data-path="data-wrangling.html"><a href="data-wrangling.html#change-data-types"><i class="fa fa-check"></i><b>7.4</b> Data types: What are they and how can you change them</a></li>
<li class="chapter" data-level="7.5" data-path="data-wrangling.html"><a href="data-wrangling.html#handling-factors"><i class="fa fa-check"></i><b>7.5</b> Handling factors</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="data-wrangling.html"><a href="data-wrangling.html#recoding-factors"><i class="fa fa-check"></i><b>7.5.1</b> Recoding factors</a></li>
<li class="chapter" data-level="7.5.2" data-path="data-wrangling.html"><a href="data-wrangling.html#reordering-factor-levels"><i class="fa fa-check"></i><b>7.5.2</b> Reordering factor levels</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="data-wrangling.html"><a href="data-wrangling.html#dealing-with-missing-data"><i class="fa fa-check"></i><b>7.6</b> Dealing with missing data</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="data-wrangling.html"><a href="data-wrangling.html#mapping-missing-data"><i class="fa fa-check"></i><b>7.6.1</b> Mapping missing data</a></li>
<li class="chapter" data-level="7.6.2" data-path="data-wrangling.html"><a href="data-wrangling.html#patterns-of-missing-data"><i class="fa fa-check"></i><b>7.6.2</b> Identifying patterns of missing data</a></li>
<li class="chapter" data-level="7.6.3" data-path="data-wrangling.html"><a href="data-wrangling.html#replacing-removing-missing-data"><i class="fa fa-check"></i><b>7.6.3</b> Replacing or removing missing data</a></li>
<li class="chapter" data-level="7.6.4" data-path="data-wrangling.html"><a href="data-wrangling.html#main-takeaways-regarding-dealing-with-missing-data"><i class="fa fa-check"></i><b>7.6.4</b> Main takeaways regarding dealing with missing data</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="data-wrangling.html"><a href="data-wrangling.html#latent-constructs"><i class="fa fa-check"></i><b>7.7</b> Latent constructs and their reliability</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html"><i class="fa fa-check"></i><b>8</b> Descriptive Statistics</a></li>
<li class="chapter" data-level="9" data-path="correlations.html"><a href="correlations.html"><i class="fa fa-check"></i><b>9</b> Correlations</a></li>
<li class="chapter" data-level="10" data-path="comparing-groups.html"><a href="comparing-groups.html"><i class="fa fa-check"></i><b>10</b> Comparing groups</a></li>
<li class="chapter" data-level="11" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>11</b> Regression: Creating models to predict future observations</a></li>
<li class="chapter" data-level="12" data-path="mixed-methods-research-analysing-qualitative-in-r.html"><a href="mixed-methods-research-analysing-qualitative-in-r.html"><i class="fa fa-check"></i><b>12</b> Mixed-methods research: Analysing qualitative in R</a></li>
<li class="chapter" data-level="13" data-path="next-steps.html"><a href="next-steps.html"><i class="fa fa-check"></i><b>13</b> Where to go from here: The next steps in your R journey</a>
<ul>
<li class="chapter" data-level="13.1" data-path="next-steps.html"><a href="next-steps.html#next-steps-github"><i class="fa fa-check"></i><b>13.1</b> GitHub: A Gateway to even more ingenious R packages</a></li>
<li class="chapter" data-level="13.2" data-path="next-steps.html"><a href="next-steps.html#next-steps-books"><i class="fa fa-check"></i><b>13.2</b> Books to read and expand your knowledge</a></li>
<li class="chapter" data-level="13.3" data-path="next-steps.html"><a href="next-steps.html#next-steps-online-readings"><i class="fa fa-check"></i><b>13.3</b> Engage in regular online readings about R</a></li>
<li class="chapter" data-level="13.4" data-path="next-steps.html"><a href="next-steps.html#next-steps-twitter"><i class="fa fa-check"></i><b>13.4</b> Join the Twitter community and hone your skills</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="exercises-solutions.html"><a href="exercises-solutions.html"><i class="fa fa-check"></i><b>14</b> Exercises: Solutions</a>
<ul>
<li class="chapter" data-level="14.1" data-path="exercises-solutions.html"><a href="exercises-solutions.html#exercises-solutions-5"><i class="fa fa-check"></i><b>14.1</b> Solutions for @ref(exercises-chapter-5)</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://twitter.com/daniel_dauber" target="blank">Find me on twitter!</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Non-Programmers: A Guide for Social Scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-wrangling" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Data Wrangling</h1>
<pre><code>## ‚îÄ‚îÄ Attaching packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 1.3.1 ‚îÄ‚îÄ</code></pre>
<pre><code>## ‚úì ggplot2 3.3.5     ‚úì purrr   0.3.4
## ‚úì tibble  3.1.3     ‚úì dplyr   1.0.7
## ‚úì tidyr   1.1.3     ‚úì stringr 1.4.0
## ‚úì readr   2.0.0     ‚úì forcats 0.5.1</code></pre>
<pre><code>## ‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<p>You collected your data over months (and sometimes years) and all you really want to know is whether your data makes sense and reveals something nobody would have ever expected. However, before we can truly go ahead with our analysis, it is essential to understand whether our data is ‚Äòtidy.‚Äô Very often, data we receive is everything else but clean and we need to not only check whether our data is fit for analysis, but also ensure it is in a format that is easy to handle and work with. For small datasets, this is usually a brief exercise. However, I found myself cleaning data for a month, because the dataset was spread out into multiple spreadsheets (no pun intended) with different numbers of columns and odd column names. Thus, data cleaning or data wrangling is an essential first step in any data analysis. It is a step that cannot be skipped and has to be performed on every new dataset.</p>
<p>Luckily, R provides many useful functions to make our lives easier. If you are like me and used to do this in Excel, you will be in for a treat. It is a lot simpler using R to do achieve a clean dataset.</p>
<p>Here is an overview of the different steps we usually work through before we can start with our main analysis. This is list is certainly not exhaustive:</p>
<ul>
<li><p>Data import</p></li>
<li><p>Checking data types</p></li>
<li><p>Recoding and arranging factors, i.e.¬†categorical data.</p></li>
<li><p>Running missing data diagnostics</p></li>
<li><p>and other things</p></li>
</ul>
<div id="import-your-data" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Import your data</h2>
<p>The <code>r4np</code> package hosts a number of different datasets to work with, but at some point you might want to apply your R knowledge to your own data. Therefore, an important first step is to import your data into RStudio. There are three different methods all of which are very handy:</p>
<ol style="list-style-type: decimal">
<li><p>Click on your data file in the Files pane and choose `Import Dataset‚Äô.</p></li>
<li><p>Use the <code>Import Dataset</code> button in the Environment pane.</p></li>
<li><p>Import your data calling one of the <code>readr</code> functions in the console or RScript</p></li>
</ol>
<p>We will use the <code>readr</code> package to import our data. Using this package we can import a range of different file formats, including <code>.csv</code>, <code>.tsv</code>, <code>.txt</code>. If you want to import data from an <code>.xlsx</code> file you have to use another package called <code>readxl</code>. The following sections will primarily focus on how to use <code>reader</code> via RStudio or directly in your Console or RScript.</p>
<div id="import-data-from-the-files-pane" class="section level3" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Import data from the Files pane</h3>
<p>This approach is by far the easiest. Let‚Äôs assume you have a dataset called <code>gender_age.csv</code> in your <code>00_raw_data</code> folder. If you wish to import it, you can do the following:</p>
<ol style="list-style-type: decimal">
<li><p>Click on the name of the file</p></li>
<li><p>Select <code>Import Dataset</code>.</p>
<p><img src="images/chapter_07_img/01_files_pane_import/01_files_pane_import.png" /></p></li>
<li><p>A new window will open and you can choose different options. You also see a little preview of how the data looks like. This is great if you are not sure whether you did it correctly.</p>
<p><img src="images/chapter_07_img/01_files_pane_import/02_files_pane_import.png" /></p></li>
<li><p>You can make changes to how the data should be imported, but in most cases the default should be fine. Here is quick breakdown of the most important options:</p>
<ul>
<li><p><code>Name</code> allows you to change the object name, i.e.¬†the name of the object this data will be assigned to. I tend to use <code>df_raw</code> (<code>df</code> stand for <code>dataframe</code>, which is how R calls such rectangular datasets).</p></li>
<li><p><code>Skip</code> is useful if your data file starts with a number of empty rows at the top. You can remove them here.</p></li>
<li><p><code>First Row as Names</code> is ticked by default. In most Social Science projects we tend to have the name of the variables as the first row in your dataset.</p></li>
<li><p><code>Trim Spaces</code> removes any unnecassry white-space in your dataset. Leave it ticked.</p></li>
<li><p><code>Open Data Viewer</code> allows you to look at your imported dataset. I use it rarely, but it can be helpful at times.</p></li>
<li><p><code>Delimiter</code> defines how your columns are separate from each other in your file. If it is a <code>.csv</code> it would imply it is a ‚Äòcomma-separated value,‚Äô i.e.¬†<code>,</code>. This can be changed for different files, depending on how your data is delimited. You can even use the option <code>Other‚Ä¶</code> to specify a custom separation option.</p></li>
<li><p><code>NA</code> specifies how missing values in your data are acknowledged. By default, empty cells in your data will be recognised as missing data.</p></li>
</ul>
<p><img src="images/chapter_07_img/01_files_pane_import/03_files_pane_import.png" /></p></li>
<li><p>Once you are happy with your choices, you can click on <code>Import</code>.</p></li>
<li><p>You will find your dataset in the Environment pane.</p>
<p><img src="images/chapter_07_img/01_files_pane_import/04_files_pane_import.png" /></p></li>
</ol>
<p>In the console you can see that R also provides the <code>Column specification</code>, which we need later when inspecting ‚Äòdata types.‚Äô <code>readr</code> automatically imports all text-based columns as <code>chr</code>, i.e.¬†<code>character</code> values. However, this might not be always true. More on this aspect of data wrangling in Chapter <a href="data-wrangling.html#change-data-types">7.4</a>.</p>
</div>
<div id="importing-data-from-the-environment-pane" class="section level3" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Importing data from the Environment pane</h3>
<p>The process of important datasets from the Environment pane follows largely the one from the Files pane. Click on <code>Import Dataset &gt; From Text (readr)‚Ä¶</code>. The only main difference lies in having to find the file using the <code>Browse‚Ä¶</code> button. The rest of the steps are the same as above.</p>
<p>You will have to use the Environment pane for importing data from specific file types, e.g.¬†<code>.txt</code>, because using the File pane would only open the file, but not import the data for further processing.</p>
</div>
<div id="importing-data-using-functions" class="section level3" number="7.1.3">
<h3><span class="header-section-number">7.1.3</span> Importing data using functions directly</h3>
<p>If you organised your files well it can be very easy and quick to just use all the functions from <code>readr</code> directly. Here are two examples of how you can use <code>readr</code> to import your data. Make sure you have the <code>tidyverse</code> package loaded.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data-wrangling.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import data from &#39;.csv&#39;</span></span>
<span id="cb4-2"><a href="data-wrangling.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;00_raw_data/gender_age.csv&quot;</span>)</span>
<span id="cb4-3"><a href="data-wrangling.html#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="data-wrangling.html#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Import data from any file text file by defining the separator yourself</span></span>
<span id="cb4-5"><a href="data-wrangling.html#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">read_delim</span>(<span class="st">&quot;00_raw_data/gender_age.txt&quot;</span>, <span class="at">delim =</span> <span class="st">&quot;|&quot;</span>)</span></code></pre></div>
<p>You might be wondering, whether you can use <code>read_delim()</code> to import <code>.csv</code> files too. The answer is ‚ÄòYes, you can!‚Äô In contrast to <code>read_delim()</code>, <code>read_csv()</code> sets the delimiter to <code>,</code> by default. This is mainly for convenience, because <code>.csv</code> files are one of the most popular file formats that people use for storing their data.</p>
<p>You might be also wondering what actually a ‚Äòdelimiter‚Äô is. When you record data in a plain-text file it is easy to see where a new observation starts and ends, because it is defined by a row in your file. However, we also need to tell our software where a new column starts, i.e.¬†where a cell starts and ends. Consider the following example. We have a file that holds our data which looks like this:</p>
<pre><code>idagegender
124male
256female
333male</code></pre>
<p>The first row we probably can still decipher as <code>id</code>, <code>age</code>, <code>gender</code>. However, the next row makes it difficult to understand which value represents the <code>id</code> of a participant and which value reflects the <code>age</code> of that participant. Like us, computer software would find it hard too to make a decision regarding this ambiguous content. Thus, we need to use delimiters to make it very clear which value belongs to which column. In a <code>.csv</code> file the data would be separated by a <code>,</code>.</p>
<pre><code>id,age,gender
1,24,male
2,56,female
3,33,male</code></pre>
<p>Considering our example from above, we could also use <code>|</code> as a delimiter.</p>
<pre><code>id|age|gender
1|24|male
2|56|female
3|33|male</code></pre>
<p>There is a lot more to <code>readr</code> than could be covered in this book. If you want to know more about this R package, I highly recommend to look at the <a href="https://readr.tidyverse.org" target="blank" title="package webpage">readr webpage</a>.</p>
</div>
</div>
<div id="inspecting-raw-data" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Inspecting your data</h2>
<p>For the rest of this chapter, we will use the <code>wvs</code> dataset from the <code>r4np</code> package. However, we do not know much about this dataset and therefore we cannot ask any research questions worth investigating. Therefore we need to look at what it contains. The first method of inspecting a dataset is to type the name of the object, i.e.¬†<code>wvs</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data-wrangling.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure you loaded the &#39;r4np&#39; package first</span></span>
<span id="cb8-2"><a href="data-wrangling.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(r4np)</span>
<span id="cb8-3"><a href="data-wrangling.html#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="data-wrangling.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the data in the console</span></span>
<span id="cb8-5"><a href="data-wrangling.html#cb8-5" aria-hidden="true" tabindex="-1"></a>wvs</span></code></pre></div>
<pre><code>## # A tibble: 69,578 √ó 7
##    `Participant ID` `Country name` Gender   Age relationship_status       
##               &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                     
##  1         20070001 Andorra             1    60 married                   
##  2         20070002 Andorra             0    47 living together as married
##  3         20070003 Andorra             0    48 separated                 
##  4         20070004 Andorra             1    62 living together as married
##  5         20070005 Andorra             0    49 living together as married
##  6         20070006 Andorra             1    51 married                   
##  7         20070007 Andorra             1    33 married                   
##  8         20070008 Andorra             0    55 widowed                   
##  9         20070009 Andorra             1    40 single                    
## 10         20070010 Andorra             1    38 living together as married
## # ‚Ä¶ with 69,568 more rows, and 2 more variables: Freedom.of.Choice &lt;dbl&gt;,
## #   Satisfaction-with-life &lt;dbl&gt;</code></pre>
<p>The result is a series of rows and columns. The first information we receive is: <code>A tibble: 69,578 x 9</code>. This indicates that our dataset has 69,578 observations (i.e.¬†rows) and 9 columns (i.e.¬†variables). This rectangular format is the one we encounter most frequently in Social Sciences (and probably beyond). If you ever worked in Microsoft Excel, this format will look familiar.</p>
<p>Even though it might be nice to look at a dataset in this way, it is not particularly useful. Depending on your monitor size you might only see a small number of columns and therefore we do not get to see a complete list of all variables. In short, we hardly ever will find much use in inspecting data this way. Luckily there are other functions that can help us.</p>
<p>If you want to see each variable covered in the dataset and their data types, you can use the function <code>glimpse()</code> from the <code>dplyr</code> package (which is loaded when load the <code>tidyverse</code> package).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-wrangling.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(wvs)</span></code></pre></div>
<pre><code>## Rows: 69,578
## Columns: 7
## $ `Participant ID`         &lt;dbl&gt; 20070001, 20070002, 20070003, 20070004, 20070‚Ä¶
## $ `Country name`           &lt;chr&gt; &quot;Andorra&quot;, &quot;Andorra&quot;, &quot;Andorra&quot;, &quot;Andorra&quot;, &quot;‚Ä¶
## $ Gender                   &lt;dbl&gt; 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, ‚Ä¶
## $ Age                      &lt;dbl&gt; 60, 47, 48, 62, 49, 51, 33, 55, 40, 38, 54, 3‚Ä¶
## $ relationship_status      &lt;chr&gt; &quot;married&quot;, &quot;living together as married&quot;, &quot;sep‚Ä¶
## $ Freedom.of.Choice        &lt;dbl&gt; 10, 9, 9, 9, 8, 10, 10, 8, 8, 10, 9, 8, 10, 7‚Ä¶
## $ `Satisfaction-with-life` &lt;dbl&gt; 10, 9, 9, 8, 7, 10, 5, 8, 8, 10, 8, 8, 10, 7,‚Ä¶</code></pre>
<p>The output of glimpse shows us the name of each column/variable after the <code>$</code>, for example <code>`Participant ID`</code>. The <code>$</code> is used to look up certain variables in our dataset. If we want to inspect the column <code>relationship_status</code> only, we could write the following:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data-wrangling.html#cb12-1" aria-hidden="true" tabindex="-1"></a>wvs<span class="sc">$</span>relationship_status</span></code></pre></div>
<pre><code>##     [1] &quot;married&quot;                    &quot;living together as married&quot;
##     [3] &quot;separated&quot;                  &quot;living together as married&quot;
##     [5] &quot;living together as married&quot; &quot;married&quot;                   
##     [7] &quot;married&quot;                    &quot;widowed&quot;                   
....</code></pre>
<p>After the variable name we find the recognised datatype for each column in <code>&lt;...&gt;</code>, for example <code>&lt;chr&gt;</code>. We will return to data types in Chapter <a href="data-wrangling.html#change-data-types">7.4</a>. Lastly, we get examples of the data that is included. This output is much more helpful.</p>
<p>I use <code>glimpse()</code> very frequently for different purposes, for example:</p>
<ul>
<li><p>to understand what variables are included in a dataset,</p></li>
<li><p>to check correctness of data types,</p></li>
<li><p>to inspect variable names for typos or unconventional names,</p></li>
<li><p>to look up variable names.</p></li>
</ul>
<p>There is one more way to inspect your data and receive a lot more information about it by using a specialised R package. The <code>skimr</code> package is excellent in ‚Äòskimming‚Äô your dataset. It provides not only information about variable names and data types, but also provides some descriptive statistics. If you installed the <code>r4np</code> package and called the function <code>install_r4np()</code>, you will have <code>skimr</code> installed already.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-wrangling.html#cb14-1" aria-hidden="true" tabindex="-1"></a>skimr<span class="sc">::</span><span class="fu">skim</span>(wvs)</span></code></pre></div>
<p>The output in the console should look like this:</p>
<p><img src="images/chapter_07_img/02_skimr_output/skimr_output.png" /></p>
<p>As you can tell, there is a lot more information in this output. Many descriptive statistics that could be useful are already displayed. <code>skim()</code> provides a summary of the dataset first and then sorts the variables automatically by data type. Depending on the data type you also receive different descriptive statistics. As an added bonus, the function also provides a histogram for numeric variables. However, there is one main problem: Some of the numeric variables are actually not numeric: <code>Participant ID</code> and <code>Gender</code>. Thus, we will have to correct the data types in a moment.</p>
<p>Inspecting your data in this way can be helpful to get a better understanding of what your data includes and spot problems with it. If you receive data from someone else, these methods are a good way to familiarise yourself with the dataset relatively quickly. Since this particular dataset was prepared for this book, I also made sure I provide documentation for it. You can access it by using <code>?wvs</code> in the Console. This will open the documentation in the Help pane. Such documentation can be found for every dataset we use in this book.</p>
</div>
<div id="colnames-cleaning" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Cleaning your column names: Call the <code>janitor</code></h2>
<p>If you have an eagle eye, you might have noticed that most of the variable names in <code>wvs</code> are not consistent or easy to read/use.</p>
<div class="sourceCode" id="messy_column_names"><pre class="sourceCode r"><code class="sourceCode r"><span id="messy_column_names-1"><a href="data-wrangling.html#messy_column_names-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Whitespace and inconsistent capitalisation</span></span>
<span id="messy_column_names-2"><a href="data-wrangling.html#messy_column_names-2" aria-hidden="true" tabindex="-1"></a>Participant ID        </span>
<span id="messy_column_names-3"><a href="data-wrangling.html#messy_column_names-3" aria-hidden="true" tabindex="-1"></a>Country name          </span>
<span id="messy_column_names-4"><a href="data-wrangling.html#messy_column_names-4" aria-hidden="true" tabindex="-1"></a>Gender                </span>
<span id="messy_column_names-5"><a href="data-wrangling.html#messy_column_names-5" aria-hidden="true" tabindex="-1"></a>Age                   </span>
<span id="messy_column_names-6"><a href="data-wrangling.html#messy_column_names-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="messy_column_names-7"><a href="data-wrangling.html#messy_column_names-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Difficult to read</span></span>
<span id="messy_column_names-8"><a href="data-wrangling.html#messy_column_names-8" aria-hidden="true" tabindex="-1"></a>YearOfBirth           </span>
<span id="messy_column_names-9"><a href="data-wrangling.html#messy_column_names-9" aria-hidden="true" tabindex="-1"></a>Freedom.of.Choice     </span>
<span id="messy_column_names-10"><a href="data-wrangling.html#messy_column_names-10" aria-hidden="true" tabindex="-1"></a>Satisfaction<span class="sc">-</span>with<span class="sc">-</span>life</span></code></pre></div>
<p>From Chapter <a href="r-basics-the-very-fundamentals.html#coding-etiquette">5.5</a>, you will remember that being consistent in the way your write your code and name your objects is essential. The same applies, of course, to variable names. R will not break using the existing names, but it will save you a lot of frustration if we take a minute to clean the names and make them more consistent.</p>
<p>You are probably thinking: This is easy, I just open the dataset in Excel and change all the column names. Indeed, it would be a viable and easy option, but it is not very efficient, especially with larger datasets that have many more variables. Instead, we can make use of the <code>janitor</code> package. By definition, <code>janitor</code> is a package that helps to clean up whatever needs cleaning. In our case we want to tidy our column names. We can use the function <code>clean_names()</code> to achieve this. We store the result in a new object called <code>wvs</code> to keep those changes. The object will also show up in our Environment pane.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data-wrangling.html#cb15-1" aria-hidden="true" tabindex="-1"></a>wvs <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(wvs)</span>
<span id="cb15-2"><a href="data-wrangling.html#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(wvs)</span></code></pre></div>
<pre><code>## Rows: 69,578
## Columns: 7
## $ participant_id         &lt;dbl&gt; 20070001, 20070002, 20070003, 20070004, 2007000‚Ä¶
## $ country_name           &lt;chr&gt; &quot;Andorra&quot;, &quot;Andorra&quot;, &quot;Andorra&quot;, &quot;Andorra&quot;, &quot;An‚Ä¶
## $ gender                 &lt;dbl&gt; 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0,‚Ä¶
## $ age                    &lt;dbl&gt; 60, 47, 48, 62, 49, 51, 33, 55, 40, 38, 54, 39,‚Ä¶
## $ relationship_status    &lt;chr&gt; &quot;married&quot;, &quot;living together as married&quot;, &quot;separ‚Ä¶
## $ freedom_of_choice      &lt;dbl&gt; 10, 9, 9, 9, 8, 10, 10, 8, 8, 10, 9, 8, 10, 7, ‚Ä¶
## $ satisfaction_with_life &lt;dbl&gt; 10, 9, 9, 8, 7, 10, 5, 8, 8, 10, 8, 8, 10, 7, 1‚Ä¶</code></pre>
<p>Now that <code>janitor</code> has done its magic, we suddenly have easy to read variable names that are consistent with the ‚ÄòTidyverse style guide‚Äô <span class="citation">(<a href="#ref-wickham-2021" role="doc-biblioref">Wickham 2021</a>)</span>.</p>
<p>If, for whatever reason, the variable names are still not looking the way you want, you can use the function <code>rename()</code> from the <code>dplyr</code> package to manually assign new variable names.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-wrangling.html#cb17-1" aria-hidden="true" tabindex="-1"></a>wvs <span class="ot">&lt;-</span> wvs <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">satisfaction =</span> satisfaction_with_life,</span>
<span id="cb17-2"><a href="data-wrangling.html#cb17-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">country =</span> country_name)</span>
<span id="cb17-3"><a href="data-wrangling.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(wvs)</span></code></pre></div>
<pre><code>## Rows: 69,578
## Columns: 7
## $ participant_id      &lt;dbl&gt; 20070001, 20070002, 20070003, 20070004, 20070005, ‚Ä¶
## $ country             &lt;chr&gt; &quot;Andorra&quot;, &quot;Andorra&quot;, &quot;Andorra&quot;, &quot;Andorra&quot;, &quot;Andor‚Ä¶
## $ gender              &lt;dbl&gt; 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0,‚Ä¶
## $ age                 &lt;dbl&gt; 60, 47, 48, 62, 49, 51, 33, 55, 40, 38, 54, 39, 44‚Ä¶
## $ relationship_status &lt;chr&gt; &quot;married&quot;, &quot;living together as married&quot;, &quot;separate‚Ä¶
## $ freedom_of_choice   &lt;dbl&gt; 10, 9, 9, 9, 8, 10, 10, 8, 8, 10, 9, 8, 10, 7, 10,‚Ä¶
## $ satisfaction        &lt;dbl&gt; 10, 9, 9, 8, 7, 10, 5, 8, 8, 10, 8, 8, 10, 7, 10, ‚Ä¶</code></pre>
<p>You are probably wondering what <code>%&gt;%</code> stands for. This symbol is called a <em>‚Äòpiping operator‚Äô</em> and it allows us to chain multiple functions together by considering the output of the previous function. So, do not confuse <code>&lt;-</code> with <code>%&gt;%</code>. Each operator serves a different purpose. The <code>%&gt;%</code> has become synonymous with the <code>tidyverse</code> approach to R programming and is the chosen approach for this book. Many functions from the <code>tidyverse</code> are designed to be chained together.</p>
<p>If we wanted to spell out what we just did we could say:</p>
<ol style="list-style-type: decimal">
<li><p><code>wvs &lt;-</code>: We assigned whatever happened to the right of the assign operator to the object <code>wvs</code>.</p></li>
<li><p><code>wvs %&gt;%</code>: We defined the dataset we want to use with the functions defined after the <code>%&gt;%</code>.</p></li>
<li><p><code>rename(satisfaction = satisfcation_with_life)</code>: We define a new name <code>satisfaction</code> for the column <code>satisfaction_with_life</code>. Notice that the order is <code>new_name = old_name</code>. Here we also use <code>=</code>. A rare occasion where it makes sense to do so.</p></li>
</ol>
<p>Just for clarification, the following two lines of code accomplish the same task. The only difference lies that with <code>%&gt;%</code> we could chain another function right after it. You could say, it is a matter of taste which approach you prefer. However, in later chapters it will become obvious why using <code>%&gt;%</code> is very advantageous.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data-wrangling.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Renaming a column using &#39;%&gt;%&#39;</span></span>
<span id="cb19-2"><a href="data-wrangling.html#cb19-2" aria-hidden="true" tabindex="-1"></a>wvs <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">satisfaction_new =</span> satisfaction)</span>
<span id="cb19-3"><a href="data-wrangling.html#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="data-wrangling.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Renaming a column without &#39;%&gt;%&#39;</span></span>
<span id="cb19-5"><a href="data-wrangling.html#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rename</span>(wvs, <span class="at">satisfaction_new =</span> satisfaction)</span></code></pre></div>
<p>Since you will be using the pipe operator very frequently, it is a good idea to remember the keyboard shortcut for it: <code>Ctrl+Shift+M</code> for PC and <code>Cmd+Shift+M</code> for Mac.</p>
</div>
<div id="change-data-types" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Data types: What are they and how can you change them</h2>
<p>When we inspected our data, I mentioned that some of the variables do not have the correct data type. You might be familiar with different data types by classifying them as:</p>
<ul>
<li><p><em>Nominal data</em>, which is categorical data of no particular order,</p></li>
<li><p><em>Ordinal data</em>, which is categorical data with a defined order, and</p></li>
<li><p><em>Quantitative data</em>, which is data that usually is represented by numeric values.</p></li>
</ul>
<p>In R we have a slightly different distinction:</p>
<ul>
<li><p><code>character</code> / <code>&lt;chr&gt;</code>: Textual data, for example the text of a tweet.</p></li>
<li><p><code>factor</code> / <code>&lt;fct&gt;</code>: Categorical data with a finite number of categories with no particular order.</p></li>
<li><p><code>ordered</code> / <code>&lt;ord&gt;</code>: Categorical data with a finite number of categories with a particular order.</p></li>
<li><p><code>double</code> / <code>&lt;dbl&gt;</code>: Numerical data with decimal places.</p></li>
<li><p><code>integer</code> / <code>&lt;int&gt;</code>: Numerical data with whole numbers only (i.e.¬†no decimals).</p></li>
<li><p><code>logical</code> / <code>&lt;lgl&gt;</code>: Logical data, which only consists of values ‚ÄòTRUE‚Äô and ‚ÄòFALSE.‚Äô</p></li>
<li><p><code>date</code> / <code>date</code>: Data which consists dates, e.g.¬†‚Äò2021-08-05.‚Äô</p></li>
<li><p><code>date-time</code> / <code>dttm</code>: Data which consists dates and times, e.g.¬†‚Äò2021-08-05 16:29:25 BST.‚Äô</p></li>
</ul>
<p>For a complete list of data types I recommend to take a look at <a href="https://tibble.tidyverse.org/articles/types.html" target="blank" title="&#39;Column Data Types&#39;">‚ÄòColumn Data Types‚Äô</a> <span class="citation">(<a href="#ref-data-types-2021" role="doc-biblioref">M√ºller and Wickham 2021</a>)</span>.</p>
<p>It is obvious that R has a more fine-grained categorisation of data types. The most important distinction, though, lies between <code>&lt;chr&gt;</code>, <code>&lt;fct&gt;</code>/<code>&lt;ord&gt;</code> and <code>&lt;dbl&gt;</code> for most datasets in the Social Sciences. Still, it is good to be aware of what the abbreviations in your <code>tibble</code> mean and how they might affect your analysis.</p>
<p>Now that we have a solid understanding of different data types, we can have a look at our dataset and see whether <code>readr</code> classified our variables correctly.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data-wrangling.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(wvs)</span></code></pre></div>
<pre><code>## Rows: 69,578
## Columns: 7
## $ participant_id      &lt;dbl&gt; 20070001, 20070002, 20070003, 20070004, 20070005, ‚Ä¶
## $ country             &lt;chr&gt; &quot;Andorra&quot;, &quot;Andorra&quot;, &quot;Andorra&quot;, &quot;Andorra&quot;, &quot;Andor‚Ä¶
## $ gender              &lt;dbl&gt; 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0,‚Ä¶
## $ age                 &lt;dbl&gt; 60, 47, 48, 62, 49, 51, 33, 55, 40, 38, 54, 39, 44‚Ä¶
## $ relationship_status &lt;chr&gt; &quot;married&quot;, &quot;living together as married&quot;, &quot;separate‚Ä¶
## $ freedom_of_choice   &lt;dbl&gt; 10, 9, 9, 9, 8, 10, 10, 8, 8, 10, 9, 8, 10, 7, 10,‚Ä¶
## $ satisfaction        &lt;dbl&gt; 10, 9, 9, 8, 7, 10, 5, 8, 8, 10, 8, 8, 10, 7, 10, ‚Ä¶</code></pre>
<p><code>readr</code> did a great job in identifying all the numeric variables. However, by default, <code>readr</code> imports all variables that include text as <code>&lt;chr&gt;</code>. It appears, in our dataset this is not quite correct. The variables <code>countr_name</code>, <code>gender</code> and <code>relationship_status</code> specify a finite number of categories. Therefore they should be classified as <code>factor</code>. The variable <code>participant_id</code> is represented by numbers, but its meaning is also rather categorical in nature. We would not use the ID numbers of participants to perform additions or multiplications. This would simply make no sense. Therefore, it might be wise to turn them into a <code>factor</code> as well, even though we likely will not use it in our analysis and would make no difference. However, I am a stickler for those kind of things, so I would include in it.</p>
<p>In order to perform the conversion we need to use two new functions from <code>dplyr</code>:</p>
<ul>
<li><p><code>mutate()</code>: Changes, i.e.¬†‚Äòmutates,‚Äô a variable.</p></li>
<li><p><code>as_factor()</code>: Converts data from one type into a <code>factor</code>.</p></li>
</ul>
<p>If we want to convert all variables in one go, we can put them into the same function, separated by a <code>,</code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data-wrangling.html#cb22-1" aria-hidden="true" tabindex="-1"></a>wvs <span class="ot">&lt;-</span> wvs <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="data-wrangling.html#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">as_factor</span>(country),</span>
<span id="cb22-3"><a href="data-wrangling.html#cb22-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">gender =</span> <span class="fu">as_factor</span>(gender),</span>
<span id="cb22-4"><a href="data-wrangling.html#cb22-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">relationship_status =</span> <span class="fu">as_factor</span>(relationship_status),</span>
<span id="cb22-5"><a href="data-wrangling.html#cb22-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">participant_id =</span> <span class="fu">as_factor</span>(participant_id)</span>
<span id="cb22-6"><a href="data-wrangling.html#cb22-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb22-7"><a href="data-wrangling.html#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="data-wrangling.html#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(wvs)</span></code></pre></div>
<pre><code>## Rows: 69,578
## Columns: 7
## $ participant_id      &lt;fct&gt; 20070001, 20070002, 20070003, 20070004, 20070005, ‚Ä¶
## $ country             &lt;fct&gt; &quot;Andorra&quot;, &quot;Andorra&quot;, &quot;Andorra&quot;, &quot;Andorra&quot;, &quot;Andor‚Ä¶
## $ gender              &lt;fct&gt; 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0,‚Ä¶
## $ age                 &lt;dbl&gt; 60, 47, 48, 62, 49, 51, 33, 55, 40, 38, 54, 39, 44‚Ä¶
## $ relationship_status &lt;fct&gt; married, living together as married, separated, li‚Ä¶
## $ freedom_of_choice   &lt;dbl&gt; 10, 9, 9, 9, 8, 10, 10, 8, 8, 10, 9, 8, 10, 7, 10,‚Ä¶
## $ satisfaction        &lt;dbl&gt; 10, 9, 9, 8, 7, 10, 5, 8, 8, 10, 8, 8, 10, 7, 10, ‚Ä¶</code></pre>
<p>The output in the console shows that we successfully performed the transformation and our data types are as we intended them to be. Mission accomplished.</p>
</div>
<div id="handling-factors" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Handling factors</h2>
<div id="recoding-factors" class="section level3" number="7.5.1">
<h3><span class="header-section-number">7.5.1</span> Recoding factors</h3>
<p>Another common problem we have to tackle when working with data is their representation in the dataset. For example, <code>gender</code> could be measured as <code>male</code> and <code>female</code><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> or as <code>0</code> and <code>1</code>. R does not mind which way you represent your data, but some other software does. Therefore, when we import data from somewhere else the values of a variable might not look the way we want. The practicality of having your data represented accurately as what they are becomes obvious when you intend to create tables and plots.</p>
<p>For example, we might be interested to know how many participants in the <code>wvs</code> were <code>male</code> and how many were <code>female</code>. The function <code>count()</code> from <code>dplyr</code> does exactly that.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data-wrangling.html#cb24-1" aria-hidden="true" tabindex="-1"></a>wvs <span class="sc">%&gt;%</span> <span class="fu">count</span>(gender)</span></code></pre></div>
<pre><code>## # A tibble: 3 √ó 2
##   gender     n
##   &lt;fct&gt;  &lt;int&gt;
## 1 0      33049
## 2 1      36478
## 3 &lt;NA&gt;      51</code></pre>
<p>Now we know how many people were <code>male</code> and <code>female</code> and how many did not disclose their <code>gender</code>. Or do we? The issue here is that you would have to know what the <code>0</code> and <code>1</code> stand for. Surely you would have a coding manual that gives you the answer, but it seems a bit of a complication. For <code>gender</code>, this might still be easy to remember, but can you recall the numbers for 48 countries?</p>
<p>It certainly would be easier to replace the <code>0</code>s and <code>1</code>s with their corresponding labels. This can be achieved with a simple function called <code>fct_recode()</code> from <code>forcats</code>. Since we ‚Äòmutate‚Äô a variable into something else, we have to use the <code>mutate()</code> function too.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data-wrangling.html#cb26-1" aria-hidden="true" tabindex="-1"></a>wvs <span class="ot">&lt;-</span> wvs <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">gender =</span> <span class="fu">fct_recode</span>(gender, <span class="st">&quot;male&quot;</span> <span class="ot">=</span> <span class="st">&quot;0&quot;</span>, <span class="st">&quot;female&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>))</span></code></pre></div>
<p>If you have been following along very carefully you might spot one oddity in this code: <code>"0"</code> and <code>"1"</code>. You likely recall that in Chapter <a href="r-basics-the-very-fundamentals.html#r-basics-the-very-fundamentals">5</a> I mentioned that we use <code>""</code> for <code>character</code> values but not for numbers. What happens if we run the code and remove <code>""</code>.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data-wrangling.html#cb27-1" aria-hidden="true" tabindex="-1"></a>wvs <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">gender =</span> <span class="fu">fct_recode</span>(gender, <span class="st">&quot;male&quot;</span> <span class="ot">=</span> <span class="dv">0</span>, <span class="st">&quot;female&quot;</span> <span class="ot">=</span> <span class="dv">1</span>))</span></code></pre></div>
<pre><code>## Error: Problem with `mutate()` column `gender`.
## ‚Ñπ `gender = fct_recode(gender, male = 0, female = 1)`.
## x Each input to fct_recode must be a single named string. Problems at positions: 1, 2</code></pre>
<p>The error message is very easy to understand: <code>fct_recode()</code> only expects <code>strings</code> as input and not numbers. R recognises <code>0</code> and <code>1</code> as numbers, but <code>fct_recode()</code> converts a <code>factor</code> value into another <code>factor</code> value. To refer to a factor level (i.e.¬†one of the categories in our factor), we have to use <code>""</code>. In other words, data types matter and are often a source of problems with your code. Thus, always pay close attention to it.</p>
<p>If we rerun our analysis from before and generate a frequency table for <code>gender</code>, we now get a much more readable output.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data-wrangling.html#cb29-1" aria-hidden="true" tabindex="-1"></a>wvs <span class="sc">%&gt;%</span> <span class="fu">count</span>(gender)</span></code></pre></div>
<pre><code>## # A tibble: 3 √ó 2
##   gender     n
##   &lt;fct&gt;  &lt;int&gt;
## 1 male   33049
## 2 female 36478
## 3 &lt;NA&gt;      51</code></pre>
<p>Another benefit of going through the trouble of recoding your factors is the readability of your plots. We could easily generate a bar plot based on the above table and have appropriate labels, instead of <code>0</code> and <code>1</code>.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data-wrangling.html#cb31-1" aria-hidden="true" tabindex="-1"></a>wvs <span class="sc">%&gt;%</span> <span class="fu">count</span>(gender) <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="data-wrangling.html#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gender, n)) <span class="sc">+</span> </span>
<span id="cb31-3"><a href="data-wrangling.html#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="r_for_non_programmers_files/figure-html/Barplot%20for%20gender-1.png" width="672" /></p>
<p>Plots are an excellent way to explore your data and understand relationships between variables. More about this when we start to perform analytical steps on our data (see Chapter <a href="descriptive-statistics.html#descriptive-statistics">8</a> and beyond).</p>
<p>Another use case for recoding factors could be for purely cosmetic reasons. When looking through our dataset, we might notice that some country names are very long and would not look great in data visualisations or tables. Thus, we could consider shortening them.</p>
<p>First we need to find out which country names are particularly long. There are 48 countries in this dataset, so it could take some time to look through them all. Instead we could use the function<code>filter()</code> from <code>dplyr</code> to pick only countries with a long name. However, this poses another problem: How can we tell the filter function to pick only country names with a certain length? Ideally, we would want a function that does the counting for us. As you probably anticipated, there is a package, called <code>stringr</code>, which also belongs to the <code>tidyverse,</code> and has a function which counts the number of characters that represent a value in our dataset: <code>str_length()</code>. This function takes any <code>character</code> variable and returns the length of it. This also works with <code>factors</code>, because this function can ‚Äòcoerce‚Äô it into a <code>character</code>, i.e.¬†it just ignores that it is a <code>factor</code> and looks at is as if it was a regular <code>character</code> variable. Good news for us, because now we can put the puzzle pieces together.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="data-wrangling.html#cb32-1" aria-hidden="true" tabindex="-1"></a>wvs <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="data-wrangling.html#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_length</span>(country) <span class="sc">&gt;=</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="data-wrangling.html#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(country)</span></code></pre></div>
<pre><code>## # A tibble: 3 √ó 2
##   country                             n
##   &lt;fct&gt;                           &lt;int&gt;
## 1 Bolivia, Plurinational State of  2067
## 2 Iran, Islamic Republic of        1499
## 3 Korea, Republic of               1245</code></pre>
<p>I use the value <code>15</code> arbitrarily after some trial and error. You can change the value and see which other countries would show up with a lower threshold. However, this number seems to do the trick and returns three countries that seem to have longer labels. All we have to do is to replace these categories with new ones the same way we recoded <code>gender</code>. You probably can guess already what we have to do to achieve this.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data-wrangling.html#cb34-1" aria-hidden="true" tabindex="-1"></a>wvs <span class="ot">&lt;-</span> wvs <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="data-wrangling.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">fct_recode</span>(country,</span>
<span id="cb34-3"><a href="data-wrangling.html#cb34-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;Bolivia&quot;</span> <span class="ot">=</span> <span class="st">&quot;Bolivia, Plurinational State of&quot;</span>,</span>
<span id="cb34-4"><a href="data-wrangling.html#cb34-4" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;Iran&quot;</span> <span class="ot">=</span> <span class="st">&quot;Iran, Islamic Republic of&quot;</span>,</span>
<span id="cb34-5"><a href="data-wrangling.html#cb34-5" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;Korea&quot;</span> <span class="ot">=</span> <span class="st">&quot;Korea, Republic of&quot;</span>))</span></code></pre></div>
</div>
<div id="reordering-factor-levels" class="section level3" number="7.5.2">
<h3><span class="header-section-number">7.5.2</span> Reordering factor levels</h3>
<p><code>TODO: CONTINUE FROM HERE</code></p>
<ul>
<li>Consider whether this should happen here or later. Probably later, actually when we talk about descriptive statistics. This is not really data cleaning at this point. Too much stuff already. Move to descriptive statistics section.</li>
</ul>
</div>
</div>
<div id="dealing-with-missing-data" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> Dealing with missing data</h2>
<p>There is hardly any Social Sciences project where researchers do not have to deal with data that is missing. Participants are sometimes not willing to complete a questionnaire or miss a second round of data collection entirely, e.g in longitudinal studies. It is not the purpose of this chapter to delve into all aspects of analysing missing data, but provide a solid starting point. There are mainly three steps involved in dealing with missing data:</p>
<ol style="list-style-type: decimal">
<li><p>Mapping missing data</p></li>
<li><p>Identifying patterns of missing data</p></li>
<li><p>Replacing or removing missing data</p></li>
</ol>
<div id="mapping-missing-data" class="section level3" number="7.6.1">
<h3><span class="header-section-number">7.6.1</span> Mapping missing data</h3>
<p>Every study that intends to be rigorous will have to first identify how much data is missing. In R this can be achieved in multiple ways, but using a specialised package like <code>naniar</code> does help us to do this very quickly and systematically. First we have to load the <code>naniar</code> package and then we use the function <code>vis_miss()</code> to visualise how much and where exactly data is missing.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data-wrangling.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(naniar)</span>
<span id="cb35-2"><a href="data-wrangling.html#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">vis_miss</span>(wvs)</span></code></pre></div>
<div class="figure"><span id="fig:mapping-missing-data"></span>
<img src="r_for_non_programmers_files/figure-html/mapping-missing-data-1.png" alt="Mapping missing data with naniar" width="672" />
<p class="caption">
Figure 7.1: Mapping missing data with naniar
</p>
</div>
<p><code>naniar</code> plays along nicely with the <code>tidyverse</code> approach of programming. As such, it would also be possible to write <code>wvs %&gt;% vis_miss()</code>.</p>
<p>As we can see, 99,7% of our dataset is complete and we are only missing 0.3%. The dark lines (actually blocks) refer to missing data points. On the x-axis we can see all our variables and on the y-axis we see our observations. This is the same layout as our rectangular dataset: Rows are observations and columns are variables. Overall, this dataset appears relatively complete (luckily). In addition, we can see the percentage of missing data per variable. <code>freedom_of_choice</code> is clearly the variable with most missing data, i.e.¬†0.79%. Still, the amount of missing data is not very large.</p>
<p>When working with larger datasets it might also be useful to rank variables by their degree of missing data to see where the biggest problems lie.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data-wrangling.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gg_miss_var</span>(wvs)</span></code></pre></div>
<div class="figure"><span id="fig:missing-data-per-variable"></span>
<img src="r_for_non_programmers_files/figure-html/missing-data-per-variable-1.png" alt="Missing data per variable" width="672" />
<p class="caption">
Figure 7.2: Missing data per variable
</p>
</div>
<p>It is very noticeable that <code>freedom_of_choice</code> has the most missing data points, while <code>participant_id</code>, and <code>country_name</code> have no missing values. If you prefer to see the actual numbers instead, we can use as series of functions that start with <code>miss_</code> (for a complete list of all functions see the <a href="https://naniar.njtierney.com/reference/index.html" target="blank" title="reference page of naniar">reference page of naniar</a>). In order to retrieve the numeric values which are reflected in the plot above, we can write the following:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="data-wrangling.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarise the missingness in each variable</span></span>
<span id="cb37-2"><a href="data-wrangling.html#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">miss_var_summary</span>(wvs)</span></code></pre></div>
<pre><code>## # A tibble: 7 √ó 3
##   variable            n_miss pct_miss
##   &lt;chr&gt;                &lt;int&gt;    &lt;dbl&gt;
## 1 freedom_of_choice      547   0.786 
## 2 relationship_status    335   0.481 
## 3 age                    318   0.457 
## 4 satisfaction           239   0.343 
## 5 gender                  51   0.0733
## 6 participant_id           0   0     
## 7 country                  0   0</code></pre>
<p>For mapping missing data, especially in larger datasets with many variables, I tend to prefer data visualisations over numerical results. This also has the benefit that patterns of missing data can be more easily identified as well.</p>
</div>
<div id="patterns-of-missing-data" class="section level3" number="7.6.2">
<h3><span class="header-section-number">7.6.2</span> Identifying patterns of missing data</h3>
<p>If you find that your data ‚Äòsuffers‚Äô from missing data, it is essential to answer another question: Is data missing systematically? This is quite an important diagnostic step since systematically missing data would imply that if we remove these observations from our dataset as is, we likely produce wrong results.</p>
<p>We can distinguish missing data based on how it is missing, i.e.</p>
<ul>
<li><p>missing completely at random (MCAR),</p></li>
<li><p>missing at random (MAR), and</p></li>
<li><p>missing not at random (MNAR). <span class="citation">(<a href="#ref-rubin-1976" role="doc-biblioref">Rubin 1976</a>)</span></p></li>
</ul>
<div id="missing-completetly-at-random-mcar" class="section level4" number="7.6.2.1">
<h4><span class="header-section-number">7.6.2.1</span> Missing completely at random (MCAR)</h4>
<p>Missing completely at random (MCAR) means that neither observed nor missing data can systematically explain why data is missing. It is pure coincidence how data is missing and there is no underlying pattern.</p>
<p>The <code>naniar</code> package comes with the very popular Little‚Äôs MCAR test <span class="citation">(<a href="#ref-little-1988" role="doc-biblioref">Little 1988</a>)</span>, which provides insights into whether our data is missing completely at random. Thus, we can call the function <code>mcar_test()</code> and inspect the result.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="data-wrangling.html#cb39-1" aria-hidden="true" tabindex="-1"></a>wvs <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="data-wrangling.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>participant_id) <span class="sc">%&gt;%</span>     <span class="co"># Remove variables which do not reflect a response</span></span>
<span id="cb39-3"><a href="data-wrangling.html#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mcar_test</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1 √ó 4
##   statistic    df p.value missing.patterns
##       &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;            &lt;int&gt;
## 1      411.    67       0               19</code></pre>
<p>When you run such a test, you have to make sure that variables which are not part of the data collection are removed. In our case, the <code>participant_id</code> is generated by the researcher and does not represent an actual response by the participants. As such, we need to remove it using <code>select()</code> before we can run the test. A <code>-</code> inverts the meaning of <code>select()</code>. While <code>select(participant_id)</code> would do what it says, i.e.¬†include it as the only variable in the test, <code>select(-participant_id)</code> results in selecting everything but this variable in our test. You will find, it is sometimes easier to remove a variable with <code>select()</code> rather than listing all the variables you want to keep.</p>
<p>Since the <code>p.value</code> of the test is so small that it got rounded down to <code>0</code>, i.e.¬†<span class="math inline">\(p&lt;0.0001\)</span>, we have to assume that our data is not missing completely at random. If we found that <span class="math inline">\(p&gt;0.05\)</span>, we would have confirmation that data is missing completely at random.</p>
</div>
<div id="missing-at-random-mar" class="section level4" number="7.6.2.2">
<h4><span class="header-section-number">7.6.2.2</span> Missing at random (MAR)</h4>
<p>Missing at random (MAR) refers to a situation where missing data can only be explained by the observed data, but not the missing data. <span class="citation"><a href="#ref-dong-et-al-2013" role="doc-biblioref">Dong and Peng</a> (<a href="#ref-dong-et-al-2013" role="doc-biblioref">2013</a>)</span> (p.¬†2) provide a good example when this is the case:</p>
<blockquote>
<p><em>Let‚Äôs suppose that students who scored low on the pre-test are more likely to drop out of the course, hence, their scores on the post-test are missing. If we assume that the probability of missing the post-test depends only on scores on the pre-test, then the missing mechanism on the post-test is MAR. In other words, for students who have the same pre-test score, the probability of [them] missing the post-test is random.</em></p>
</blockquote>
<p>Thus, a main difference between MCAR and MAR data lies in the fact that we can observe some patterns of missing data if data is MAR. These patterns are only based on data we actually have, i.e.¬†observed data. We also assume that no unobserved variables can explain these or other patterns.</p>
<p>Accordingly, we first look into variables that have no missing data and see whether they can explain our missing data in other variables. For example, we could investigate whether missing data in <code>freedom_of_choice</code> is attributed to specific countries. <a id="missing-data-by-country-table"></a></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="data-wrangling.html#cb41-1" aria-hidden="true" tabindex="-1"></a>wvs <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="data-wrangling.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="data-wrangling.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(freedom_of_choice)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-4"><a href="data-wrangling.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-5"><a href="data-wrangling.html#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))                      <span class="co"># Rearranging scores for easier reading</span></span></code></pre></div>
<pre><code>## # A tibble: 32 √ó 2
## # Groups:   country [32]
##    country         n
##    &lt;fct&gt;       &lt;int&gt;
##  1 Japan          47
##  2 Brazil         44
##  3 New Zealand    44
##  4 Russia         43
##  5 Bolivia        40
##  6 Romania        29
##  7 Kazakhstan     27
##  8 Turkey         24
##  9 Egypt          23
## 10 Serbia         20
## # ‚Ä¶ with 22 more rows</code></pre>
<p>As becomes clear, there are four countries that have particularly high numbers of missing data for <code>freedom_of_choice</code>: Japan, Brazil, New Zealand, Russia and Bolivia. Why this is the case lies beyond this dataset and is something only the researchers themselves could possibly explain. Collecting data in different countries is particularly challenging and one is quickly faced with different unfavourable conditions. Tthe missing data is not completely random, as it seems, because we have some first evidence that the location of data collection might have affected the completeness of it.</p>
<p>Another way of understanding patterns of missing data can be achieved by looking at whether there are relationships between missing values, for example the co-occurrence of missing values across different variables. This can be achieved by using upset plots. An upset plot consists of three parts: Set size, intersection size and a Venn diagram which defines the intersections.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="data-wrangling.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gg_miss_upset</span>(wvs)</span></code></pre></div>
<p><img src="r_for_non_programmers_files/figure-html/Upset%20plot-1.png" width="672" /></p>
<p>In our dataset, the most frequent combination of missing data occurs when only <code>freedom_of_choice</code> is missing (the first column), but nothing else. Similar results can be found for <code>relationships_status</code> and <code>age</code>. The first combination of missing data is defined by two variables: <code>satisfaction</code> and <code>freedom_of_choice</code>. In total 107 participants had <code>satisfaction</code> and <code>freedom_of_choice</code> missing but nothing else.</p>
<p>The ‚Äòset size‚Äô shown in the upset plot refers to the number of missing values for each variable in the diagram. This correspondents to what we have found when looking at Figure <a href="data-wrangling.html#fig:missing-data-per-variable">7.2</a>).</p>
<p>Our analysis also suggests that values are not completely randomly missing but that we have data to help explain why they are missing.</p>
</div>
<div id="missing-not-at-random-mnar" class="section level4" number="7.6.2.3">
<h4><span class="header-section-number">7.6.2.3</span> Missing not at random (MNAR)</h4>
<p>Lastly, missing not at random (MNAR) implies that data is missing systematically and that other variables or reasons exist that explain why data is missing, but they are not fully known to us. In questionnaire-based research an easily overlooked reason that can explain missing data is the ‚Äòpage-drop-off‚Äô phenomenon. In such cases, participants stop completing a questionnaire once they advance to another page. Figure <a href="data-wrangling.html#fig:mnar-example">7.3</a> shows this very clearly for a large scale project where an online questionnaire was used. After almost every page break in the questionnaire, some participants decided to discontinue. Finding these types of patterns is difficult when only working with numeric values. Thus, it is always advisable to visualise your data as well. Such missing data is linked to the design of the data collection tool.</p>
<div class="figure"><span id="fig:mnar-example"></span>
<img src="images/chapter_07_img/03_missing_data/00_mnar_example.png" alt="MNAR pattern in a dataset due to 'page-drop-offs'" width="960" />
<p class="caption">
Figure 7.3: MNAR pattern in a dataset due to ‚Äòpage-drop-offs‚Äô
</p>
</div>
<p>Defining whether a dataset is MNAR or not is mainly achieved by ruling out MCAR and MAR assumptions. It is not possible to test whether missing data is MNAR, unless we have more information about the underlying population available <span class="citation">(<a href="#ref-van2020rebutting" role="doc-biblioref">Ginkel et al. 2020</a>)</span>.</p>
<p>We have sufficient evidence that our data is MAR as was shown <a href="data-wrangling.html#missing-at-random-mar">above</a>, because we managed to identify some relationships between unobserved and observed data. In practice, it is very rare to find datasets that are truly MCAR <span class="citation">(<a href="#ref-van-buuren-2018" role="doc-biblioref">Buuren 2018</a>)</span>. Therefore we might consider ‚Äòimputation‚Äô as a possible strategy to solve our missing data problem. More about imputation in the next Chapter.</p>
<p>If you are looking for more inspiration of how you could visualise and identify patterns of missingness in your data, you might find the ‚Äò<a href="https://naniar.njtierney.com/articles/naniar-visualisation.html" target="blank" title="Gallery of &#39;naniar&#39; plots">Gallery</a>‚Äô of the <code>naniar</code> website particularly useful.</p>
</div>
</div>
<div id="replacing-removing-missing-data" class="section level3" number="7.6.3">
<h3><span class="header-section-number">7.6.3</span> Replacing or removing missing data</h3>
<p>Once you determined which pattern of missing data applies to your dataset, it is time to evaluate the options of how we want to deal with those missing values. Generally, you can either keep the missing values as they are, replace them or remove them entirely.</p>
<p><span class="citation"><a href="#ref-jakobsen-et-al-2017" role="doc-biblioref">Jakobsen et al.</a> (<a href="#ref-jakobsen-et-al-2017" role="doc-biblioref">2017</a>)</span> provide a rule of thumb of 5% where researchers can consider missing data as negligible, i.e.¬†we can ignore the missing values, because they won‚Äôt affect our analysis in a significant way. They also argue that if the proportion of missing data exceeds 40%, we should also only work with our observed data. However, with such a large amount of missing data, it is very questionable whether we can rely on our analysis as much as we want to. If the missing data lies somewhere in-between this range, we need to consider the missing data pattern at hand.</p>
<p>If data is MCAR, we could remove missing data. This process is called ‚Äòlistwise deletion,‚Äô i.e.¬†you remove all data from a participant with missing data. As just mentioned, removing missing values is only suitable if you have relatively few missing values in your dataset (see also <span class="citation"><a href="#ref-schafer-1999" role="doc-biblioref">Schafer</a> (<a href="#ref-schafer-1999" role="doc-biblioref">1999</a>)</span>) as is the case with the <code>wvs</code> dataset. There are additional problems with deleting observations listwise, many of which are summarised by <span class="citation"><a href="#ref-van-buuren-2018" role="doc-biblioref">Buuren</a> (<a href="#ref-van-buuren-2018" role="doc-biblioref">2018</a>)</span> in his <a href="https://stefvanbuuren.name/fimd/sec-simplesolutions.html" target="blank" title="introduction">introduction</a>. Usually, we try to avoid removing data as much as possible. If you wanted to perform listwise deletion it can be done with a single function call: <code>na.omit()</code> from the built-in <code>stats</code> package. Here is an example of how we can apply this function.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data-wrangling.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># No more missing data in this plot</span></span>
<span id="cb44-2"><a href="data-wrangling.html#cb44-2" aria-hidden="true" tabindex="-1"></a>wvs <span class="sc">%&gt;%</span> <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> <span class="fu">vis_miss</span>()</span></code></pre></div>
<p><img src="r_for_non_programmers_files/figure-html/Example%20of%20removing%20all%20missing%20data%20points-1.png" width="672" /></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="data-wrangling.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># How much observations are left after we removed all missing data?</span></span>
<span id="cb45-2"><a href="data-wrangling.html#cb45-2" aria-hidden="true" tabindex="-1"></a>wvs <span class="sc">%&gt;%</span> <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> <span class="fu">count</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1 √ó 1
##       n
##   &lt;int&gt;
## 1 68312</code></pre>
<p>If you wanted to remove the missing data without the plot you can just use <code>wvs_no_na &lt;- na.omit(wvs)</code>. I always recommend to ‚Äòsave‚Äô the result in a new object to ensure I keep my original data available. This can be helpful when trying to compare how this decision affects my analysis, i.e.¬†I can run the analysis with and without missing data removed. However, for the <code>wvs</code> dataset this does not seem to be the best option.</p>
<p>Based on our analysis of the <code>wvs</code> dataset (by no means complete!), we could assume that data is MAR. In such cases, it is possible to ‚Äòimpute‚Äô the missing values, i.e.¬†we replace the missing data with computed scores. This is possible because we can model the missing data based on variables we have. For obvious reasons, we cannot model missing data based on variables we have not measured in our study.</p>
<p>You might be thinking: Why would it make data better if we ‚Äòmake up‚Äô numbers? Is this not cheating? Imputation of missing values is a science in itself. There is plenty to read about the process of handling missing data which would reach far beyond the scope of this book. However, the seminal work of <span class="citation"><a href="#ref-van-buuren-2018" role="doc-biblioref">Buuren</a> (<a href="#ref-van-buuren-2018" role="doc-biblioref">2018</a>)</span>, <span class="citation"><a href="#ref-dong-et-al-2013" role="doc-biblioref">Dong and Peng</a> (<a href="#ref-dong-et-al-2013" role="doc-biblioref">2013</a>)</span> and <span class="citation"><a href="#ref-jakobsen-et-al-2017" role="doc-biblioref">Jakobsen et al.</a> (<a href="#ref-jakobsen-et-al-2017" role="doc-biblioref">2017</a>)</span> are excellent starting points. In short: Simply removing missing data can lead to biases in your data, e.g.¬†if we removed missing data in our dataset, we would mainly exclude participants from Japan, Brazil, New Zealand, Russia and Bolivia (as we found out <a href="data-wrangling.html#missing-data-by-country-table">earlier</a>). While imputation is not perfect, scholars have shown that it can produce more reliable results than not using imputation at all (<code>add some references here</code>), assuming the data meets the requirements for such imputation.</p>
<p>Even though our dataset has only a very small amount of missing data (relative to the entire size), we can still make use of imputation. There are many different ways of how one can approach this task, one of which is ‚Äòmultiple imputation.‚Äô As highlighted by <span class="citation"><a href="#ref-van2020rebutting" role="doc-biblioref">Ginkel et al.</a> (<a href="#ref-van2020rebutting" role="doc-biblioref">2020</a>)</span>, multiple imputation has not yet reached the same popularity as listwise deletion, despite its benefits. A main reason for this lies in the complexity of using this technique. Therefore I included an example of how to use multiple imputation separately in Chapter @ref(). There are many more approaches to imputation and going through them all in detail would be impossible and distract from the main purpose of the book. Still, I would like to share some interesting packages with you that use different imputation methods:</p>
<ul>
<li><p><a href="https://cran.r-project.org/web/packages/Amelia/index.html" target="blank" title="mice">mice</a> (Multivariate Imputation via Chained Equations)</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/Amelia/index.html" target="blank" title="Amelia">Amelia</a> (Uses a bootstrapped-based algorithm)</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/missForest/index.html" target="blank" title="missForest">missForest</a> (Uses a random forest algorithm)</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/Hmisc/index.html" target="blank" title="Hmisc">Hmisc</a> (Uses Additive Regression, Bootstrapping, and Predictive Mean Matching)</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/mi/index.html" target="blank" title="mi">mi</a> (Uses posterior predictive distribution, predictive mean matching, mean-imputation, median-imputation, or conditional mean-imputation)</p></li>
</ul>
<p>Besides multiple imputation, there is also the option for single imputation. The <code>simputation</code> package offers a great variety of different imputation functions, one of which also fits our data quite well <code>impute_knn()</code>. This function makes use of a clustering technique called ‚ÄòK-nearest neighbour.‚Äô In this case, the function will look for observations that are closest to the one that has missing data and takes the value of that observation. In other words, it looks for similar participants who answered the questionnaire in a very similar way. The great convenience of this approach is that it can handle all kinds of data types at the same time, which is not true for all imputation techniques.</p>
<p>If we apply this function to our own dataset, we have to write the following:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="data-wrangling.html#cb47-1" aria-hidden="true" tabindex="-1"></a>wvs_nona <span class="ot">&lt;-</span> wvs <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="data-wrangling.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>participant_id) <span class="sc">%&gt;%</span> </span>
<span id="cb47-3"><a href="data-wrangling.html#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span>                  <span class="co"># Transforms our tibble into a dataframe</span></span>
<span id="cb47-4"><a href="data-wrangling.html#cb47-4" aria-hidden="true" tabindex="-1"></a>  simputation<span class="sc">::</span><span class="fu">impute_knn</span>(. <span class="sc">~</span> .)</span></code></pre></div>
<p>The function <code>impute_knn(. ~ .)</code> might look like a combination of text with an emoji <code>(. ~ .)</code>. This imputation function requires us to specify a model to impute the data. Since we want to impute all missing values in the dataset and use all variables available, we put <code>.</code> on both sides of the equation, which is separated by a <code>~</code>. The <code>.</code> reflects that we do not specify a specific variable, but instead tell the function to use all variables that are not mentioned. In our case, we did not mention any variables at all and therefore it chooses all of them. If we wanted to impute only <code>freedom_of_choice</code> we would have to put <code>impute_knn(freedom_of_choice ~ .)</code>. We will elaborate more on how to specify models when we cover regression models (see Chapter <a href="regression.html#regression">11</a>).</p>
<p>As you will have noticed, we also had to convert our <code>tibble</code> into a <code>dataframe</code> using <code>as.data.frame()</code>. As mentioned in Chapter <a href="r-basics-the-very-fundamentals.html#functions">5.3</a>, some functions require a certain data type or format. The <code>simputation</code> package works with <code>dplyr</code>, but it prefers <code>dataframe</code>s. Based on my experiences, the wrong data type or format is one of the most frequent causes of errors that novice R programmers report. So, keep an eye on it and read the documentation carefully.</p>
<p>Be aware that imputation of any kind can take a long time. On my MacBook Pro it took about 4.22 seconds to complete <code>impute_knn()</code> with the <code>wvs</code> dataset. If we used multiple imputation, this would have taken considerably longer, i.e.¬†several minutes and more.</p>
<p>We now should have a dataset that is free of any missing values. To make sure this is the case we can create the missing data matrix that we created at the very beginning of this chapter (see Figure <a href="data-wrangling.html#fig:mapping-missing-data">7.1</a>).</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="data-wrangling.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vis_miss</span>(wvs_nona)</span></code></pre></div>
<p><img src="r_for_non_programmers_files/figure-html/Mapping%20missing%20data%20of%20imputeted%20dataset-1.png" width="672" /></p>
</div>
<div id="main-takeaways-regarding-dealing-with-missing-data" class="section level3" number="7.6.4">
<h3><span class="header-section-number">7.6.4</span> Main takeaways regarding dealing with missing data</h3>
<p>Handling missing data is hardly ever a simple process. Do not feel discouraged if you get lost in the myriad of options. While there is some guidance on how and when to use certain strategies to deal with missing values in your dataset, the most important point to remember is: Be transparent of what you did. As long as you can explain why you did something and how you did it, everyone can follow your thought process and help improve your analysis. However, ignoring the fact that data is missing and not acknowledging it is more than just unwise.</p>
</div>
</div>
<div id="latent-constructs" class="section level2" number="7.7">
<h2><span class="header-section-number">7.7</span> Latent constructs and their reliability</h2>
<p>A common challenge Social Scientists face is that we want to measure something that cannot be measured directly. For example, ‚Äòhappiness‚Äô is a feeling that does not naturally occur as a number which we can observe and measure. The opposite is true for ‚Äòtemperature,‚Äô which is naturally measured in numbers. At the same time, ‚Äòhappiness‚Äô is much more complex of a variable than ‚Äòtemperature.‚Äô In order to account for this we often work with ‚Äòlatent variables.‚Äô These are defined as variables which are not directly measured, but are inferred from other variables. In practice, we often use multiple questions in a questionnaire to measure one latent variable, usually by computing the mean of those questions.</p>
<p>The <code>gep</code> dataset from the <code>r4np</code> package includes data about students‚Äô social integration experience (<code>si</code>) and communication skills development (<code>cs</code>). Data was obtained using the <a href="https://warwick.ac.uk/gep" target="blank" title="Global Education Profiler (GEP)">Global Education Profiler (GEP)</a>. Each of these latent variables is measured by 6 different questions in the questionnaire.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data-wrangling.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(gep)</span></code></pre></div>
<pre><code>## Rows: 300
## Columns: 15
## $ age                              &lt;dbl&gt; 22, 26, 24, 24, 20, 21, 22, 20, 20, 2‚Ä¶
## $ gender                           &lt;chr&gt; &quot;Male&quot;, &quot;Female&quot;, &quot;Female&quot;, &quot;Female&quot;,‚Ä¶
## $ level_of_study                   &lt;chr&gt; &quot;UG&quot;, &quot;PGT&quot;, &quot;PGT&quot;, &quot;PGT&quot;, &quot;UG&quot;, &quot;UG&quot;‚Ä¶
## $ si_socialise_with_people_exp     &lt;dbl&gt; 5, 1, 2, 5, 3, 2, 1, 4, 3, 1, 3, 4, 4‚Ä¶
## $ si_supportive_friends_exp        &lt;dbl&gt; 5, 1, 5, 5, 4, 2, 1, 4, 3, 1, 4, 4, 4‚Ä¶
## $ si_joined_activitiy_group_exp    &lt;dbl&gt; 3, 1, 2, 4, 2, 1, 1, 1, 3, 4, 1, 5, 2‚Ä¶
## $ si_time_socialising_exp          &lt;dbl&gt; 4, 2, 3, 4, 4, 3, 1, 3, 2, 2, 3, 4, 4‚Ä¶
## $ si_accommodation_meet_people_exp &lt;dbl&gt; 3, 1, 3, 4, 5, 1, 1, 3, 4, 1, 1, 5, 2‚Ä¶
## $ si_take_part_events_exp          &lt;dbl&gt; 3, 3, 3, 3, 1, 1, 1, 1, 1, 2, 3, 3, 3‚Ä¶
## $ cs_learn_different_styles_exp    &lt;dbl&gt; 4, 2, 6, 6, 3, 6, 1, 3, 4, 3, 3, 2, 5‚Ä¶
## $ cs_speak_different_context_exp   &lt;dbl&gt; 5, 4, 5, 6, 4, 4, 1, 2, 3, 6, 4, 3, 3‚Ä¶
## $ cs_improve_less_fluent_exp       &lt;dbl&gt; 5, 3, 6, 6, 2, 1, 2, 5, 3, 6, 4, 4, 4‚Ä¶
## $ cs_awareness_own_style_exp       &lt;dbl&gt; 5, 3, 4, 6, 4, 3, 1, 3, 3, 6, 4, 2, 3‚Ä¶
## $ cs_work_globally_exp             &lt;dbl&gt; 5, 4, 6, 6, 4, 5, 1, 5, 5, 4, 4, 3, 5‚Ä¶
## $ cs_find_clarification_exp        &lt;dbl&gt; 5, 3, 6, 6, 2, 4, 1, 4, 3, 6, 4, 4, 5‚Ä¶</code></pre>
<p>For example, if we wanted to know how each student scored with regards to social integration (<code>si</code>), we have to</p>
<ul>
<li><p>compute the mean (<code>mean())</code> of all related items (i.e.¬†all variables starting with <code>si_</code>),</p></li>
<li><p>for each row (<code>rowwise()</code>) because each row presents one participant.</p></li>
</ul>
<p>The same is true for communication skills (<code>cs</code>). We can compute both variables in one go:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data-wrangling.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the scores for the latent variable &#39;si&#39; and &#39;cs&#39;</span></span>
<span id="cb51-2"><a href="data-wrangling.html#cb51-2" aria-hidden="true" tabindex="-1"></a>gep <span class="ot">&lt;-</span> gep <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a href="data-wrangling.html#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb51-4"><a href="data-wrangling.html#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">si =</span> <span class="fu">mean</span>(<span class="fu">c</span>(si_socialise_with_people_exp,</span>
<span id="cb51-5"><a href="data-wrangling.html#cb51-5" aria-hidden="true" tabindex="-1"></a>                     si_supportive_friends_exp,</span>
<span id="cb51-6"><a href="data-wrangling.html#cb51-6" aria-hidden="true" tabindex="-1"></a>                     si_joined_activitiy_group_exp,</span>
<span id="cb51-7"><a href="data-wrangling.html#cb51-7" aria-hidden="true" tabindex="-1"></a>                     si_time_socialising_exp,</span>
<span id="cb51-8"><a href="data-wrangling.html#cb51-8" aria-hidden="true" tabindex="-1"></a>                     si_accommodation_meet_people_exp,</span>
<span id="cb51-9"><a href="data-wrangling.html#cb51-9" aria-hidden="true" tabindex="-1"></a>                     si_take_part_events_exp</span>
<span id="cb51-10"><a href="data-wrangling.html#cb51-10" aria-hidden="true" tabindex="-1"></a>                     )</span>
<span id="cb51-11"><a href="data-wrangling.html#cb51-11" aria-hidden="true" tabindex="-1"></a>                   ),</span>
<span id="cb51-12"><a href="data-wrangling.html#cb51-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">cs =</span> <span class="fu">mean</span>(<span class="fu">c</span>(cs_learn_different_styles_exp,   </span>
<span id="cb51-13"><a href="data-wrangling.html#cb51-13" aria-hidden="true" tabindex="-1"></a>                     cs_speak_different_context_exp,  </span>
<span id="cb51-14"><a href="data-wrangling.html#cb51-14" aria-hidden="true" tabindex="-1"></a>                     cs_improve_less_fluent_exp,</span>
<span id="cb51-15"><a href="data-wrangling.html#cb51-15" aria-hidden="true" tabindex="-1"></a>                     cs_awareness_own_style_exp,</span>
<span id="cb51-16"><a href="data-wrangling.html#cb51-16" aria-hidden="true" tabindex="-1"></a>                     cs_work_globally_exp,</span>
<span id="cb51-17"><a href="data-wrangling.html#cb51-17" aria-hidden="true" tabindex="-1"></a>                     cs_find_clarification_exp</span>
<span id="cb51-18"><a href="data-wrangling.html#cb51-18" aria-hidden="true" tabindex="-1"></a>                     )</span>
<span id="cb51-19"><a href="data-wrangling.html#cb51-19" aria-hidden="true" tabindex="-1"></a>                   )</span>
<span id="cb51-20"><a href="data-wrangling.html#cb51-20" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb51-21"><a href="data-wrangling.html#cb51-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-22"><a href="data-wrangling.html#cb51-22" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(gep)</span></code></pre></div>
<pre><code>## Rows: 300
## Columns: 17
## Rowwise: 
## $ age                              &lt;dbl&gt; 22, 26, 24, 24, 20, 21, 22, 20, 20, 2‚Ä¶
## $ gender                           &lt;chr&gt; &quot;Male&quot;, &quot;Female&quot;, &quot;Female&quot;, &quot;Female&quot;,‚Ä¶
## $ level_of_study                   &lt;chr&gt; &quot;UG&quot;, &quot;PGT&quot;, &quot;PGT&quot;, &quot;PGT&quot;, &quot;UG&quot;, &quot;UG&quot;‚Ä¶
## $ si_socialise_with_people_exp     &lt;dbl&gt; 5, 1, 2, 5, 3, 2, 1, 4, 3, 1, 3, 4, 4‚Ä¶
## $ si_supportive_friends_exp        &lt;dbl&gt; 5, 1, 5, 5, 4, 2, 1, 4, 3, 1, 4, 4, 4‚Ä¶
## $ si_joined_activitiy_group_exp    &lt;dbl&gt; 3, 1, 2, 4, 2, 1, 1, 1, 3, 4, 1, 5, 2‚Ä¶
## $ si_time_socialising_exp          &lt;dbl&gt; 4, 2, 3, 4, 4, 3, 1, 3, 2, 2, 3, 4, 4‚Ä¶
## $ si_accommodation_meet_people_exp &lt;dbl&gt; 3, 1, 3, 4, 5, 1, 1, 3, 4, 1, 1, 5, 2‚Ä¶
## $ si_take_part_events_exp          &lt;dbl&gt; 3, 3, 3, 3, 1, 1, 1, 1, 1, 2, 3, 3, 3‚Ä¶
## $ cs_learn_different_styles_exp    &lt;dbl&gt; 4, 2, 6, 6, 3, 6, 1, 3, 4, 3, 3, 2, 5‚Ä¶
## $ cs_speak_different_context_exp   &lt;dbl&gt; 5, 4, 5, 6, 4, 4, 1, 2, 3, 6, 4, 3, 3‚Ä¶
## $ cs_improve_less_fluent_exp       &lt;dbl&gt; 5, 3, 6, 6, 2, 1, 2, 5, 3, 6, 4, 4, 4‚Ä¶
## $ cs_awareness_own_style_exp       &lt;dbl&gt; 5, 3, 4, 6, 4, 3, 1, 3, 3, 6, 4, 2, 3‚Ä¶
## $ cs_work_globally_exp             &lt;dbl&gt; 5, 4, 6, 6, 4, 5, 1, 5, 5, 4, 4, 3, 5‚Ä¶
## $ cs_find_clarification_exp        &lt;dbl&gt; 5, 3, 6, 6, 2, 4, 1, 4, 3, 6, 4, 4, 5‚Ä¶
## $ si                               &lt;dbl&gt; 3.833333, 1.500000, 3.000000, 4.16666‚Ä¶
## $ cs                               &lt;dbl&gt; 4.833333, 3.166667, 5.500000, 6.00000‚Ä¶</code></pre>
<p>Compared to dealing with missing data, this is a fairly straightforward task. However, there is a caveat. Before we are allowed to compute the mean across all these variables, we need to know and understand whether all these scores reliably contribute to one single latent variable. If not, we would be in trouble and make a significant mistake.</p>
<p>By far the most common approach to assessing reliability (or more accurately ‚Äòinternal consistency‚Äô) of latent variables is Cronbach‚Äôs <span class="math inline">\(\alpha\)</span>. This indicator looks at how strongly a set of items (i.e.¬†questions in your questionnaire) are related to each other. Thus, the stronger the relationship of all items starting with <code>si_</code> to each other, the more likely we achieve a higher Cronbach‚Äôs <span class="math inline">\(\alpha\)</span>. The <code>psych</code> package has a suitable function to compute it for us.</p>
<p>Instead of listing all the items by hand, I use the function <code>starts_with()</code> to only pick the variables whose names start with <code>si_</code>. It certainly pays off to think about your variable names more thoroughly in advance to benefit from such shortcuts (see also Chapter <a href="data-wrangling.html#colnames-cleaning">7.3</a>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data-wrangling.html#cb53-1" aria-hidden="true" tabindex="-1"></a>gep <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="data-wrangling.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;si_&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb53-3"><a href="data-wrangling.html#cb53-3" aria-hidden="true" tabindex="-1"></a>  psych<span class="sc">::</span><span class="fu">alpha</span>()</span></code></pre></div>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = .)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N   ase mean  sd median_r
##       0.87      0.88    0.87      0.54 7.2 0.011  3.1 1.2     0.53
## 
##  lower alpha upper     95% confidence boundaries
## 0.85 0.87 0.9 
## 
##  Reliability if an item is dropped:
##                                  raw_alpha std.alpha G6(smc) average_r S/N
## si_socialise_with_people_exp          0.85      0.85    0.84      0.53 5.7
## si_supportive_friends_exp             0.85      0.85    0.84      0.54 5.9
## si_joined_activitiy_group_exp         0.85      0.86    0.84      0.55 6.1
## si_time_socialising_exp               0.83      0.84    0.82      0.51 5.1
## si_accommodation_meet_people_exp      0.88      0.88    0.87      0.60 7.5
## si_take_part_events_exp               0.85      0.85    0.84      0.54 5.9
##                                  alpha se  var.r med.r
## si_socialise_with_people_exp        0.014 0.0120  0.52
## si_supportive_friends_exp           0.014 0.0096  0.53
## si_joined_activitiy_group_exp       0.014 0.0131  0.53
## si_time_socialising_exp             0.015 0.0083  0.52
## si_accommodation_meet_people_exp    0.011 0.0055  0.62
## si_take_part_events_exp             0.014 0.0128  0.52
## 
##  Item statistics 
##                                    n raw.r std.r r.cor r.drop mean  sd
## si_socialise_with_people_exp     300  0.80  0.81  0.77   0.71  3.6 1.4
## si_supportive_friends_exp        300  0.79  0.80  0.75   0.69  3.4 1.5
## si_joined_activitiy_group_exp    300  0.78  0.78  0.72   0.67  2.8 1.6
## si_time_socialising_exp          300  0.87  0.87  0.86   0.80  3.2 1.5
## si_accommodation_meet_people_exp 300  0.68  0.67  0.56   0.52  3.0 1.7
## si_take_part_events_exp          300  0.80  0.80  0.75   0.70  2.6 1.5
## 
## Non missing response frequency for each item
##                                     1    2    3    4    5    6 miss
## si_socialise_with_people_exp     0.07 0.15 0.25 0.25 0.19 0.09    0
## si_supportive_friends_exp        0.15 0.15 0.18 0.25 0.18 0.09    0
## si_joined_activitiy_group_exp    0.27 0.23 0.19 0.12 0.13 0.07    0
## si_time_socialising_exp          0.14 0.22 0.26 0.17 0.13 0.08    0
## si_accommodation_meet_people_exp 0.26 0.17 0.20 0.15 0.12 0.10    0
## si_take_part_events_exp          0.30 0.22 0.21 0.15 0.06 0.05    0</code></pre>
<p>The function <code>alpha()</code> returns a lot of information. The most important part, though, is shown at the very beginning:</p>
<pre><code>##  raw_alpha std.alpha G6(smc) average_r  S/N  ase mean   sd median_r
##       0.87      0.88    0.87      0.54 7.18 0.01 3.11 1.19     0.53</code></pre>
<p>In most publications, researchers would primarily report the <code>raw_alpha</code> value. This is fine, but it is not a bad idea to also include at least <code>std.alpha</code> and <code>G6(smc)</code>.</p>
<p>In terms of interpretation, Cronbrach‚Äôs <span class="math inline">\(\alpha\)</span> scores can range from 0 to 1. The closer the score to 1 the higher we would judge its reliability. <span class="citation"><a href="#ref-nunally-1967" role="doc-biblioref">Nunally</a> (<a href="#ref-nunally-1967" role="doc-biblioref">1967a</a>)</span> originally provided the following classification for Cronbach‚Äôs <span class="math inline">\(\alpha\)</span>:</p>
<ul>
<li><p>between 0.6 and 0.5 can be sufficient during early stages of development,</p></li>
<li><p>0.8 or higher is sufficient for most basic research,</p></li>
<li><p>0.9 or higher is suitable for applied research, where the questionnaires is used to make critical decisions, e.g.¬†clinical studies, university admission tests, etc., with a ‚Äòdesired standard‚Äô of 0.95.</p></li>
</ul>
<p>However, a few years later <span class="citation"><a href="#ref-nunally-1978" role="doc-biblioref">Nunally</a> (<a href="#ref-nunally-1978" role="doc-biblioref">1967b</a>)</span> revisited his original categorisation and also considered 0.7 or higher as a suitable benchmark in case of more exploratory-type research. Needless to say, this gave grounds for researchers to pick and choose the ‚Äòright‚Äô publication for them <span class="citation">(<a href="#ref-henson2001understanding" role="doc-biblioref">Henson 2001</a>)</span>. Consquently, depending on your research field, the expected reliability score might lean more towards 0.7 or 0.8. Still, the higher the score, the better it is.</p>
<p>Our dataset shows that <code>si</code> scores a solid <span class="math inline">\(\alpha = 0.87\)</span>, which is excellent. We should repeat this step for <code>cs</code> as well.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="data-wrangling.html#cb56-1" aria-hidden="true" tabindex="-1"></a>gep <span class="sc">%&gt;%</span> </span>
<span id="cb56-2"><a href="data-wrangling.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;cs_&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb56-3"><a href="data-wrangling.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  psych<span class="sc">::</span><span class="fu">alpha</span>()</span></code></pre></div>
<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = .)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N    ase mean  sd median_r
##        0.9       0.9    0.88      0.59 8.6 0.0092    4 1.1     0.62
## 
##  lower alpha upper     95% confidence boundaries
## 0.88 0.9 0.91 
## 
##  Reliability if an item is dropped:
##                                raw_alpha std.alpha G6(smc) average_r S/N
## cs_learn_different_styles_exp       0.88      0.88    0.86      0.59 7.2
## cs_speak_different_context_exp      0.87      0.87    0.85      0.57 6.7
## cs_improve_less_fluent_exp          0.88      0.88    0.86      0.60 7.4
## cs_awareness_own_style_exp          0.87      0.87    0.85      0.58 6.9
## cs_work_globally_exp                0.87      0.87    0.85      0.57 6.7
## cs_find_clarification_exp           0.89      0.89    0.88      0.63 8.4
##                                alpha se  var.r med.r
## cs_learn_different_styles_exp    0.0109 0.0041  0.60
## cs_speak_different_context_exp   0.0117 0.0042  0.60
## cs_improve_less_fluent_exp       0.0106 0.0057  0.62
## cs_awareness_own_style_exp       0.0115 0.0055  0.57
## cs_work_globally_exp             0.0117 0.0064  0.55
## cs_find_clarification_exp        0.0098 0.0025  0.63
## 
##  Item statistics 
##                                  n raw.r std.r r.cor r.drop mean  sd
## cs_learn_different_styles_exp  300  0.81  0.81  0.76   0.72  3.9 1.4
## cs_speak_different_context_exp 300  0.85  0.85  0.82   0.77  4.0 1.4
## cs_improve_less_fluent_exp     300  0.80  0.79  0.74   0.70  3.8 1.5
## cs_awareness_own_style_exp     300  0.84  0.84  0.80   0.75  3.9 1.4
## cs_work_globally_exp           300  0.85  0.85  0.81   0.77  3.9 1.5
## cs_find_clarification_exp      300  0.72  0.74  0.65   0.62  4.3 1.2
## 
## Non missing response frequency for each item
##                                   1    2    3    4    5    6 miss
## cs_learn_different_styles_exp  0.07 0.09 0.24 0.26 0.21 0.14    0
## cs_speak_different_context_exp 0.05 0.10 0.20 0.27 0.20 0.17    0
## cs_improve_less_fluent_exp     0.07 0.15 0.20 0.23 0.20 0.15    0
## cs_awareness_own_style_exp     0.07 0.09 0.18 0.29 0.21 0.15    0
## cs_work_globally_exp           0.07 0.12 0.20 0.24 0.21 0.16    0
## cs_find_clarification_exp      0.02 0.06 0.16 0.31 0.24 0.21    0</code></pre>
<p>Similarly, to <code>si</code>, <code>cs</code> shows a very good internal consistency score of <span class="math inline">\(\alpha = 0.90\)</span>. Thus, we can be confident that if we used our latent variables we would could trust that our results are likely reliable.</p>
<p>While Cronbach‚Äôs <span class="math inline">\(\alpha\)</span> is very popular, due to its simplicity, there is plenty of criticism as well (add references). Therefore, very often it is not enough to just report the Cronbach‚Äôs <span class="math inline">\(\alpha\)</span>, but undertake additional steps. Depending on the stage of development of your measurement instrument (i.e.¬†your questionnaire) you likely have to perform one of the following prior to computing the <span class="math inline">\(\alpha\)</span> scores:</p>
<ul>
<li><p>Exploratory factor analysis (EFA): Generally used to identify latent variables in a set of questionnaire items.</p></li>
<li><p>Confirmatory factor analysis (CFA): To confirm whether a set of items truly reflect a latent variable.</p></li>
</ul>
<p>An example of exploratory factor analysis is presented in Chapter @ref(). Since the <code>gep</code> data is based on an established measurement tool we will have to perform a CFA. To perform a CFA we use the popular <code>lavaan</code> (<u>La</u>tent <u>Va</u>riable <u>An</u>alysis) package. The steps of running a CFA in R include:</p>
<ol style="list-style-type: decimal">
<li><p>Define which variables are supposed to measure a specific latent variable (i.e.¬†creating a model)</p></li>
<li><p>Run the CFA to see whether our assumptions are true</p></li>
<li><p>Interpret the results based on various indicators.</p></li>
</ol>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="data-wrangling.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lavaan)</span></code></pre></div>
<pre><code>## This is lavaan 0.6-9
## lavaan is FREE software! Please report any bugs.</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="data-wrangling.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The model which explains how items of the questionnaire relate to a latent variable</span></span>
<span id="cb60-2"><a href="data-wrangling.html#cb60-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="st">&#39;social_integration =~</span></span>
<span id="cb60-3"><a href="data-wrangling.html#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="st">  si_socialise_with_people_exp +</span></span>
<span id="cb60-4"><a href="data-wrangling.html#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="st">  si_supportive_friends_exp +</span></span>
<span id="cb60-5"><a href="data-wrangling.html#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="st">  si_joined_activitiy_group_exp +</span></span>
<span id="cb60-6"><a href="data-wrangling.html#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="st">  si_time_socialising_exp +</span></span>
<span id="cb60-7"><a href="data-wrangling.html#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="st">  si_accommodation_meet_people_exp +</span></span>
<span id="cb60-8"><a href="data-wrangling.html#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="st">  si_take_part_events_exp</span></span>
<span id="cb60-9"><a href="data-wrangling.html#cb60-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-10"><a href="data-wrangling.html#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="st">communication_skills =~</span></span>
<span id="cb60-11"><a href="data-wrangling.html#cb60-11" aria-hidden="true" tabindex="-1"></a><span class="st">  cs_learn_different_styles_exp +</span></span>
<span id="cb60-12"><a href="data-wrangling.html#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="st">  cs_speak_different_context_exp +</span></span>
<span id="cb60-13"><a href="data-wrangling.html#cb60-13" aria-hidden="true" tabindex="-1"></a><span class="st">  cs_improve_less_fluent_exp +</span></span>
<span id="cb60-14"><a href="data-wrangling.html#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="st">  cs_awareness_own_style_exp +</span></span>
<span id="cb60-15"><a href="data-wrangling.html#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="st">  cs_work_globally_exp +</span></span>
<span id="cb60-16"><a href="data-wrangling.html#cb60-16" aria-hidden="true" tabindex="-1"></a><span class="st">  cs_find_clarification_exp&#39;</span></span>
<span id="cb60-17"><a href="data-wrangling.html#cb60-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-18"><a href="data-wrangling.html#cb60-18" aria-hidden="true" tabindex="-1"></a><span class="co"># We need to perform the CFA to see how well this model fits out data</span></span>
<span id="cb60-19"><a href="data-wrangling.html#cb60-19" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">cfa</span>(model, <span class="at">data =</span> gep)</span>
<span id="cb60-20"><a href="data-wrangling.html#cb60-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-21"><a href="data-wrangling.html#cb60-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the performance indicators</span></span>
<span id="cb60-22"><a href="data-wrangling.html#cb60-22" aria-hidden="true" tabindex="-1"></a>fit_indices <span class="ot">&lt;-</span> <span class="fu">fitmeasures</span>(fit)</span>
<span id="cb60-23"><a href="data-wrangling.html#cb60-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-24"><a href="data-wrangling.html#cb60-24" aria-hidden="true" tabindex="-1"></a><span class="co"># We can use the &#39;broom&#39; package to make the results easier to read and pick only those indices we are most interested in</span></span>
<span id="cb60-25"><a href="data-wrangling.html#cb60-25" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(fit_indices) <span class="sc">%&gt;%</span></span>
<span id="cb60-26"><a href="data-wrangling.html#cb60-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(names <span class="sc">==</span> <span class="st">&quot;gfi&quot;</span> <span class="sc">|</span></span>
<span id="cb60-27"><a href="data-wrangling.html#cb60-27" aria-hidden="true" tabindex="-1"></a>         names <span class="sc">==</span> <span class="st">&quot;agfi&quot;</span> <span class="sc">|</span></span>
<span id="cb60-28"><a href="data-wrangling.html#cb60-28" aria-hidden="true" tabindex="-1"></a>         names <span class="sc">==</span> <span class="st">&quot;rmsea&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb60-29"><a href="data-wrangling.html#cb60-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">x =</span> <span class="fu">round</span>(x, <span class="dv">3</span>))         <span class="co"># Round the results to 3 decimal places</span></span></code></pre></div>
<pre><code>## # A tibble: 3 √ó 2
##   names x         
##   &lt;chr&gt; &lt;lvn.vctr&gt;
## 1 rmsea 0.063     
## 2 gfi   0.937     
## 3 agfi  0.908</code></pre>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-van-buuren-2018" class="csl-entry">
Buuren, Stef van. 2018. <em>Flexible Imputation of Missing Data</em>. CRC press.
</div>
<div id="ref-dong-et-al-2013" class="csl-entry">
Dong, Yiran, and Chao-Ying Joanne Peng. 2013. <span>‚ÄúPrincipled Missing Data Methods for Researchers.‚Äù</span> <em>SpringerPlus</em> 2 (1): 1‚Äì17.
</div>
<div id="ref-van2020rebutting" class="csl-entry">
Ginkel, Joost R van, Marielle Linting, Ralph CA Rippe, and Anja van der Voort. 2020. <span>‚ÄúRebutting Existing Misconceptions about Multiple Imputation as a Method for Handling Missing Data.‚Äù</span> <em>Journal of Personality Assessment</em> 102 (3): 297‚Äì308.
</div>
<div id="ref-henson2001understanding" class="csl-entry">
Henson, Robin K. 2001. <span>‚ÄúUnderstanding Internal Consistency Reliability Estimates: A Conceptual Primer on Coefficient Alpha.‚Äù</span> <em>Measurement and Evaluation in Counseling and Development</em> 34 (3): 177‚Äì89.
</div>
<div id="ref-jakobsen-et-al-2017" class="csl-entry">
Jakobsen, Janus Christian, Christian Gluud, J√∏rn Wetterslev, and Per Winkel. 2017. <span>‚ÄúWhen and How Should Multiple Imputation Be Used for Handling Missing Data in Randomised Clinical Trials‚Äìa Practical Guide with Flowcharts.‚Äù</span> <em>BMC Medical Research Methodology</em> 17 (1): 1‚Äì10.
</div>
<div id="ref-little-1988" class="csl-entry">
Little, Roderick J. A. 1988. <span>‚ÄúA Test of Missing Completely at Random for Multivariate Data with Missing Values.‚Äù</span> <em>Journal of the American Statistical Association</em> 83 (404): 1198‚Äì1202. <a href="https://doi.org/10.1080/01621459.1988.10478722">https://doi.org/10.1080/01621459.1988.10478722</a>.
</div>
<div id="ref-data-types-2021" class="csl-entry">
M√ºller, Kirill, and Hadley Wickham. 2021. <span>‚ÄúColumn Data Types.‚Äù</span> <a href="https://tibble.tidyverse.org/articles/types.html">https://tibble.tidyverse.org/articles/types.html</a>.
</div>
<div id="ref-nunally-1967" class="csl-entry">
Nunally, J. C. 1967a. <em>Psychometric Theory</em>. New york: Mc Graw-Hill.
</div>
<div id="ref-nunally-1978" class="csl-entry">
‚Äî‚Äî‚Äî. 1967b. <em>Psychometric Theory (2nd Edition)</em>. New york: Mc Graw-Hill.
</div>
<div id="ref-rubin-1976" class="csl-entry">
Rubin, Donald B. 1976. <span>‚ÄúInference and Missing Data.‚Äù</span> <em>Biometrika</em> 63 (3): 581‚Äì92.
</div>
<div id="ref-schafer-1999" class="csl-entry">
Schafer, Joseph L. 1999. <span>‚ÄúMultiple Imputation: A Primer.‚Äù</span> <em>Statistical Methods in Medical Research</em> 8 (1): 3‚Äì15.
</div>
<div id="ref-wickham-2021" class="csl-entry">
Wickham, Hadley. 2021. <span>‚ÄúThe Tidyverse Style Guide.‚Äù</span> <a href="https://style.tidyverse.org">https://style.tidyverse.org</a>.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>A sophisticated research project would likely not rely on a dichotomous approach to gender, but appreciate the diversity in this regard.<a href="data-wrangling.html#fnref1" class="footnote-back">‚Ü©Ô∏é</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="starting-your-r-projects.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="descriptive-statistics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["r_for_non_programmers.pdf", "r_for_non_programmers.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
